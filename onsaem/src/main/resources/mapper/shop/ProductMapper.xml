<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.onsaem.web.shop.mapper.ProductMapper">
	<!-- 상품전체조회 -->
	<select id="proList"
		resultType="com.onsaem.web.shop.service.ProductVO">
		SELECT
			P.PRODUCT_ID,P.PRODUCT_NAME,P.PRODUCT_DETAIL,
			P.PRICE AS PRICE,P.STAR AS STAR,P.AMOUNT,P.DELIVERY_FEE,
			P.OPTIONS,P.CATEGORY,P.NATURE_ID,P.PRODUCT_STATUS,
			P.REGISTER_DATE,P.MEMBER_ID,M.FILE_NAME,M.FILE_ROUTE,M.MEDIA_NAME
		FROM PRODUCTS P
		JOIN MEDIA M
		ON P.PRODUCT_ID=M.GROUP_ID
		ORDER BY
		P.REGISTER_DATE DESC
	</select>
	<!-- 상품전체조회(인기순) -->
	<select id="popList"
		resultType="com.onsaem.web.shop.service.ProductVO">
		SELECT
			P.PRODUCT_ID,P.PRODUCT_NAME,P.PRODUCT_DETAIL,P.PRICE,
			P.STAR,P.AMOUNT,P.DELIVERY_FEE,P.OPTIONS,P.CATEGORY,
			P.NATURE_ID,P.PRODUCT_STATUS,P.REGISTER_DATE,P.MEMBER_ID,
			M.FILE_NAME,M.FILE_ROUTE,M.MEDIA_NAME
		FROM PRODUCTS P
		JOIN MEDIA M
		ON
		P.PRODUCT_ID=M.GROUP_ID
		ORDER BY P.STAR DESC
	</select>
	<!-- 카테고리별 상품목록 -->
	<select id="proCategory"
		resultType="com.onsaem.web.shop.service.ProductVO">
		SELECT
			P.PRODUCT_ID,P.PRODUCT_NAME,P.PRODUCT_DETAIL,P.PRICE,P.STAR,
			P.AMOUNT,P.DELIVERY_FEE,P.OPTIONS,P.CATEGORY,P.NATURE_ID,
			P.PRODUCT_STATUS,P.REGISTER_DATE,P.MEMBER_ID,M.FILE_NAME,
			M.FILE_ROUTE,M.MEDIA_NAME
		FROM PRODUCTS P
		JOIN MEDIA M
		ON
		P.PRODUCT_ID=M.GROUP_ID
		WHERE CATEGORY=#{data}
		ORDER BY P.STAR DESC
	</select>
	<select id="searchProduct" resultType="com.onsaem.web.shop.service.ProductVO">
		SELECT
			P.PRODUCT_ID,P.PRODUCT_NAME,P.PRODUCT_DETAIL,P.PRICE,P.STAR,
			P.AMOUNT,P.DELIVERY_FEE,P.OPTIONS,P.CATEGORY,P.NATURE_ID,
			P.PRODUCT_STATUS,P.REGISTER_DATE,P.MEMBER_ID,M.FILE_NAME,
			M.FILE_ROUTE,M.MEDIA_NAME
		FROM PRODUCTS P
		JOIN MEDIA M
		ON
		P.PRODUCT_ID=M.GROUP_ID
		WHERE P.PRODUCT_NAME LIKE '%'||#{data}||'%'
		ORDER BY P.STAR DESC
	</select>
</mapper>