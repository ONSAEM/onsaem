<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<meta name="description" content="Ogani Template">
<meta name="keywords" content="Ogani, unica, creative, html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- Css  -->
<th:block layout:fragment="css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/font-awesome.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/elegant-icons.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/nice-select.css}"
		type="text/css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/shop/css/jquery-ui.min.css}"
		type="text/css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/owl.carousel.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/slicknav.min.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/style.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/css/member.css}" type="text/css">
</th:block>

<style>
.app-container {
	width: 100%;
	display: flex;
	flex-direction: column;
	height: 100%;
	background-color: var(- -app-container);
	transition: 0.2s;
}

.app-content {
	display: flex;
	height: 100%;
	overflow: hidden;
	padding: 16px 24px 24px 0;
}

.app-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	width: 100%;
	padding: 16px 24px;
	position: relative;
}

.app-header-left, .app-header-right {
	display: flex;
	align-items: center;
}

.app-header-left {
	flex-grow: 1;
}

.app-header-right button {
	margin-left: 10px;
}

.app-icon {
	width: 26px;
	height: 2px;
	border-radius: 4px;
	background-color: var(- -main-color);
	position: relative;
}

.app-icon:before, .app-icon:after {
	content: "";
	position: absolute;
	width: 12px;
	height: 2px;
	border-radius: 4px;
	background-color: var(- -main-color);
	left: 50%;
	transform: translatex(-50%);
}

.app-icon:before {
	top: -6px;
}

.app-icon:after {
	bottom: -6px;
}

.app-name {
	color: var(- -main-color);
	margin: 0;
	font-size: 20px;
	line-height: 24px;
	font-weight: 700;
	margin: 0 32px;
}

.mode-switch {
	background-color: transparent;
	border: none;
	padding: 0;
	color: var(- -main-color);
	display: flex;
	justify-content: center;
	align-items: center;
}

.search-wrapper {
	border-radius: 20px;
	background-color: var(- -search-area-bg);
	padding-right: 12px;
	height: 40px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	width: 100%;
	max-width: 480px;
	color: var(- -light-font);
	box-shadow: 0 2px 6px 0 rgba(136, 148, 171, 0.2), 0 24px 20px -24px
		rgba(71, 82, 107, 0.1);
	overflow: hidden;
}

.dark .search-wrapper {
	box-shadow: none;
}

.search-input {
	border: none;
	flex: 1;
	outline: none;
	height: 100%;
	padding: 0 20px;
	font-size: 16px;
	background-color: var(- -search-area-bg);
	color: var(- -main-color);
}

.search-input:placeholder {
	color: var(- -main-color);
	opacity: 0.6;
}

.add-btn {
	color: #fff;
	background-color: black;
	padding: 0;
	border: 0;
	border-radius: 50%;
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.notification-btn {
	color: var(- -main-color);
	padding: 0;
	border: 0;
	background-color: transparent;
	height: 32px;
	display: flex;
	justify-content: center;
	align-items: center;
}

.profile-btn {
	padding: 0;
	border: 0;
	background-color: transparent;
	display: flex;
	align-items: center;
	padding-left: 12px;
	border-left: 2px solid #ddd;
}

.profile-btn img {
	width: 32px;
	height: 32px;
	object-fit: cover;
	border-radius: 50%;
	margin-right: 4px;
}

.profile-btn span {
	color: var(- -main-color);
	font-size: 16px;
	line-height: 24px;
	font-weight: 700;
}

.page-contentÂ  {
	flex: 1;
	width: 100%;
}

.app-sidebar {
	padding: 69px 30px;
	display: flex;
	flex-direction: column;
	align-items: center;
	margin-left: 44px;
}

.app-sidebar-link {
	color: var(- -main-color);
	color: var(- -link-color);
	margin: 16px 0;
	transition: 0.2s;
	border-radius: 50%;
	flex-shrink: 0;
	width: 115px;
	height: 40px;
	display: flex;
	justify-content: left;
	align-items: center;
}

.app-sidebar-link:hover {
	background-color: var(- -link-color-hover);
	color: var(- -link-color-active);
}

.app-sidebar-link.active {
	background-color: var(- -link-color-active-bg);
	color: var(- -link-color-active);
}

.projects-section {
	flex: 2;
	background-color: var(- -projects-section);
	border-radius: 32px;
	padding: 32px 32px 0 32px;
	overflow: hidden;
	height: 100%;
	display: flex;
	flex-direction: column;
}

.projects-section-line {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding-bottom: 32px;
}

.projects-section-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 24px;
	color: var(- -main-color);
}

.projects-section-header p {
	font-size: 24px;
	line-height: 32px;
	font-weight: 700;
	opacity: 0.9;
	margin: 0;
	color: var(- -main-color);
}

.projects-section-header .time {
	font-size: 20px;
}

.projects-status {
	display: flex;
}

.item-status {
	display: flex;
	flex-direction: column;
	margin-right: 16px;
}

.item-status:not(:last-child) .status-type:after {
	content: "";
	position: absolute;
	right: 8px;
	top: 50%;
	transform: translatey(-50%);
	width: 6px;
	height: 6px;
	border-radius: 50%;
	border: 1px solid var(- -secondary-color);
}

.status-number {
	font-size: 24px;
	line-height: 32px;
	font-weight: 700;
	color: var(- -main-color);
}

.status-type {
	position: relative;
	padding-right: 24px;
	color: var(- -secondary-color);
}

.view-actions {
	display: flex;
	align-items: center;
}

.view-btn {
	width: 36px;
	height: 36px;
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 6px;
	border-radius: 4px;
	background-color: transparent;
	border: none;
	color: var(- -main-color);
	margin-left: 8px;
	transition: 0.2s;
}

.view-btn.active {
	background-color: var(- -link-color-active-bg);
	color: var(- -link-color-active);
}

.view-btn:not(.active):hover {
	background-color: var(- -link-color-hover);
	color: var(- -link-color-active);
}

.star-checkbox input {
	opacity: 0;
	position: absolute;
	width: 0;
	height: 0;
}

.star-checkbox label {
	width: 24px;
	height: 24px;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
}

.dark .star-checkbox {
	color: var(- -secondary-color);
}

.dark .star-checkbox input:checked+label {
	color: var(- -star);
}

.star-checkbox input:checked+label svg {
	fill: var(- -star);
	transition: 0.2s;
}

.project-boxes {
	margin: 0 auto;
	overflow-y: auto;
}

.project-boxes.jsGridView {
	display: flex;
	flex-wrap: wrap;
}

.project-boxes.jsGridView .project-box-wrapper {
	width: 100%;
}

.project-boxes.jsListView .project-box {
	display: flex;
	border-radius: 10px;
	position: relative;
}

.project-boxes.jsListView .project-box>* {
	margin-right: 24px;
}

.project-boxes.jsListView .more-wrapper {
	position: absolute;
	right: 16px;
	top: 16px;
}

.project-boxes.jsListView .project-box-content-header {
	order: 1;
	max-width: 120px;
}

.project-boxes.jsListView .project-box-header {
	order: 2;
}

.project-boxes.jsListView .project-box-footer {
	order: 3;
	padding-top: 0;
	flex-direction: column;
	justify-content: flex-start;
}

.project-boxes.jsListView .project-box-footer:after {
	display: none;
}

.project-boxes.jsListView .participants {
	margin-bottom: 8px;
}

.project-boxes.jsListView .project-box-content-header p {
	text-align: left;
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
}

.project-boxes.jsListView .project-box-header>span {
	position: absolute;
	bottom: 16px;
	left: 16px;
	font-size: 12px;
}

.project-boxes.jsListView .box-progress-wrapper {
	order: 3;
	flex: 1;
}

.project-box { 
	-main-color-card: #dbf6fd;
	border-radius: 30px;
	padding: 16px;
	background-color: var(- -main-color-card);
}

.project-box-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 16px;
	color: var(- -main-color);
}

.project-box-header span {
	color: #4A4A4A;
	opacity: 0.7;
	font-size: 14px;
	line-height: 16px;
}

.project-box-content-header {
	text-align: center;
	margin-bottom: 16px;
}

.project-box-content-header p {
	margin: 0;
}

.project-box-wrapper {
	padding: 8px;
	transition: 0.2s;
}

.project-btn-more {
	padding: 0;
	height: 14px;
	width: 24px;
	height: 24px;
	position: relative;
	background-color: transparent;
	border: none;
	flex-shrink: 0;
	/*&:after, &:before {
    content: '';
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: var(--main-color);
    opacity: .8;
    left: 50%;
    transform: translatex(-50%);
  }

  &:before { top: 0;}
  &:after { bottom: 0; }*/
}

.more-wrapper {
	position: relative;
}

.box-content-header {
	font-size: 16px;
	line-height: 24px;
	font-weight: 700;
	opacity: 0.7;
}

.box-content-subheader {
	font-size: 14px;
	line-height: 24px;
	opacity: 0.7;
}

.box-progress {
	display: block;
	height: 4px;
	border-radius: 6px;
}

.box-progress-bar {
	width: 100%;
	height: 4px;
	border-radius: 6px;
	overflow: hidden;
	background-color: #fff;
	margin: 8px 0;
}

.box-progress-header {
	font-size: 14px;
	font-weight: 700;
	line-height: 16px;
	margin: 0;
}

.box-progress-percentage {
	text-align: right;
	margin: 0;
	font-size: 14px;
	font-weight: 700;
	line-height: 16px;
}

.project-box-footer {
	display: flex;
	justify-content: space-between;
	padding-top: 16px;
	position: relative;
}

.project-box-footer:after {
	content: "";
	position: absolute;
	background-color: rgba(255, 255, 255, 0.6);
	width: calc(100% + 32px);
	top: 0;
	left: -16px;
	height: 1px;
}

.participants {
	display: flex;
	align-items: center;
}

.participants img {
	width: 20px;
	height: 20px;
	border-radius: 50%;
	overflow: hidden;
	object-fit: cover;
}

.participants img:not(:first-child) {
	margin-left: -8px;
}

.add-participant {
	width: 20px;
	height: 20px;
	border-radius: 50%;
	border: none;
	background-color: rgba(255, 255, 255, 0.6);
	margin-left: 6px;
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 0;
}

.days-left {
	background-color: rgba(255, 255, 255, 0.6);
	font-size: 12px;
	border-radius: 20px;
	flex-shrink: 0;
	padding: 6px 16px;
	font-weight: 700;
}

.mode-switch.active .moon {
	fill: var(- -main-color);
}

@media screen and (max-width: 980px) {
	.project-boxes.jsGridView .project-box-wrapper {
		width: 50%;
	}
	.status-number, .status-type {
		font-size: 14px;
	}
	.status-type:after {
		width: 4px;
		height: 4px;
	}
	.item-status {
		margin-right: 0;
	}
}

@media screen and (max-width: 720px) {
	.app-name, .profile-btn span {
		display: none;
	}
	.add-btn, .notification-btn, .mode-switch {
		width: 20px;
		height: 20px;
	}
	.add-btn svg, .notification-btn svg, .mode-switch svg {
		width: 16px;
		height: 16px;
	}
	.app-header-right button {
		margin-left: 4px;
	}
}

@media screen and (max-width: 520px) {
	.projects-section {
		overflow: auto;
	}
	.project-boxes {
		overflow-y: visible;
	}
	.app-sidebar, .app-icon {
		display: none;
	}
	.app-content {
		padding: 16px 12px 24px 12px;
	}
	.status-number, .status-type {
		font-size: 10px;
	}
	.view-btn {
		width: 24px;
		height: 24px;
	}
	.app-header {
		padding: 16px 10px;
	}
	.search-input {
		max-width: 120px;
	}
	.project-boxes.jsGridView .project-box-wrapper {
		width: 100%;
	}
	.projects-section {
		padding: 24px 16px 0 16px;
	}
	.profile-btn img {
		width: 24px;
		height: 24px;
	}
	.app-header {
		padding: 10px;
	}
	.projects-section-header p, .projects-section-header .time {
		font-size: 18px;
	}
	.status-type {
		padding-right: 4px;
	}
	.status-type:after {
		display: none;
	}
	.search-input {
		font-size: 14px;
	}
	.messages-btn {
		top: 48px;
	}
	.box-content-header {
		font-size: 12px;
		line-height: 16px;
	}
	.box-content-subheader {
		font-size: 12px;
		line-height: 16px;
	}
	.project-boxes.jsListView .project-box-header>span {
		font-size: 10px;
	}
	.box-progress-header {
		font-size: 12px;
	}
	.box-progress-percentage {
		font-size: 10px;
	}
	.days-left {
		font-size: 8px;
		padding: 6px 6px;
		text-align: center;
	}
	.project-boxes.jsListView .project-box>* {
		margin-right: 10px;
	}
	.project-boxes.jsListView .more-wrapper {
		right: 2px;
		top: 10px;
	}
}

/* ì²´í¬ë°ì¤ */
.containerCheck {
  width: 100%;
  height: 100%;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
}

.control-group {
  display: inline-block;
  vertical-align: top;
  background: #FFFFFF;
  text-align: left;
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  padding: 50px;
  width: 500px;
  height: 500px;
  margin: 50px;
}
.control {
  display: block;
  position: relative;
  padding-left: 30px;
  margin-bottom: 15px;
  cursor: pointer;
  font-size: 18px;
}
.control input {
  position: absolute;
  z-index: -1;
  opacity: 0;
}
.control__indicator {
  position: absolute;
  top: 2px;
  left: 0;
  height: 20px;
  width: 20px;
  background: #E6E6E6;
}
.control:hover input ~ .control__indicator,
.control input:focus ~ .control__indicator {
  background: #CCCCCC;
}
.control input:checked ~ .control__indicator {
  background: #2AA1C0;
}
.control:hover input:not([disabled]):checked ~ .control__indicator,
.control input:checked:focus ~ .control__indicator {
  background: #0E647D;
}
.control input:disabled ~ .control__indicator {
  background: #E6E6E6;
  opacity: 0.6;
  pointer-events: none;
}
.control__indicator:after {
  content: '';
  position: absolute;
  display: none;
}
.control input:checked ~ .control__indicator:after {
  display: block;
}
.control--checkbox .control__indicator:after {
  left: 8px;
  top: 4px;
  width: 3px;
  height: 8px;
  border: solid #FFFFFF;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}
.control--checkbox input:disabled ~ .control__indicator:after {
  border-color: #7B7B7B;
}


.control-group .btn {
	margin: 187px 0px 5px 18px;
    background-color: #9dc2c0;
    color: white;
    width: 43%;
}
label{
	width: 120px;
	color: #757575;
}
label input{
	margin-left: 15px;
    position: absolute;
}
.nice-select{
	margin-top: 15px;
    margin-left: 98px;
	width: 215px;
}
.control--checkbox{
	width: 100%;
}
.cateCenter{
	margin-left: 24px;
}
.cateCenter input{
	border: 1px solid #d5dbd9;
	border-radius: 3px;
	line-height: 40px;
	margin-bottom: 5px;
	padding: 0 10px;
}
</style>
</head>
<body>

	<div layout:fragment="content">

		<div class="app-container">
			<div class="app-content">
				<div class="app-sidebar">
					<a class="app-sidebar-link" th:href="@{/blog/myblog(userId=${#authentication.principal.memberId})}">
					<i class="fa-solid fa-arrow-left" style="font-size:25px;width:25px;"></i>&nbsp;MY BLOG</a>
					<a class="app-sidebar-link active" th:href="@{/blog/myblog/blogTask(blogId=${#authentication.principal.memberId})}"> 
					<i class="fa-regular fa-address-card" style="font-size:24px;"></i>&nbsp;PROFILE</a>
					<!-- êµ¬ë ê´ë¦¬ -->
					<a class="app-sidebar-link" id="blogSub" th:href="@{/blog/myblog/blogSubscribe(blogId=${#authentication.principal.memberId})}"> 
					<i class="fa-solid fa-user-group" style="font-size:22px;"></i>&nbsp;SUBSCRIBE</a>
					<!-- ì¹´íê³ ë¦¬ ê´ë¦¬ -->
					<a class="app-sidebar-link" id="blogCategory" th:href="@{/blog/myblog/blogCategory(blogId=${#authentication.principal.memberId})}">
					<i class="fa-solid fa-paperclip" style="font-size:28px;"></i>&nbsp;CATEGORY</a>
				</div>
				<div class="projects-section">
					<div class="projects-section-header">
						<p>ì¹´íê³ ë¦¬ ê´ë¦¬</p>
					</div>
					
					<div class="project-boxes jsGridView">
						<div class="project-box-wrapper">
						<!-- ì²´í¬ë°ì¤ -->
						<div class="containerCheck" id="cateCheck">
						  <div class="control-group">
						  	
						    <h2 style="font-weight: bold; margin-top: 0;margin-bottom: 50px;text-align:center;">ì¹´íê³ ë¦¬</h2>
						    <th:block th:each="cate : ${cateList}">
						    	<input type="hidden" id="blogId" th:value="${cate.blogId}">
							    <label class="control control--checkbox">[[${cate.categoryName}]] ([[${cate.publicScope}]])
<!-- 							    	<div class="cateList"></div> -->
							      <input type="checkbox" class="checkList" th:value="${cate.categoryId}"></input>
							      <div class="control__indicator"></div>
							    </label>
						    </th:block>
						  </div>
						  
						  <div class="control-group">
						  	
						    <h2 style="font-weight: bold; margin-top: 0;margin-bottom: 50px;text-align:center;">ì¶ê° / ì­ì </h2>
						    <div class="cateCenter">
							    <label style="line-height:40px;">ì¹´íê³ ë¦¬ ëª <input type="text" id="cateName" maxlength="10"></input></label>
							    
								    <div class="select">
								    	<label style="line-height:74px;position: absolute;">ê³µê°ë²ì</label>
									      <select id="cateScope">
									        <option value="">:::ê³µê°ë²ì:::</option>
									        <option value="public">ì ì²´ê³µê°</option>
									        <option value="partial">ì¼ë¶ê³µê°</option>
									        <option value="private">ë¹ê³µê°</option>
									      </select>
								      <div class="select__arrow"></div>
								    </div>
							    
						    </div>
						    <button id="cateInsert" class="btn">ì¹´íê³ ë¦¬ ì¶ê°</button>
						  	<button id="cateDelete" class="btn">ì¹´íê³ ë¦¬ ì­ì </button>
						</div>
						<!-- ì²´í¬ë°ì¤ ë -->
						</div>
					</div>
				</div>
			</div>
		</div>

		

		<!-- JS -->
		<th:block layout:fragment="script">
			<script th:src="@{/shoptemplate/js/jquery-3.3.1.min.js}"></script>
			<script th:src="@{/shoptemplate/js/bootstrap.min.js}"></script>
			<script th:src="@{/shoptemplate/js/jquery.nice-select.min.js}"></script>
			<script th:src="@{/shoptemplate/js/jquery-ui.min.js}"></script>
			<script th:src="@{/shoptemplate/js/jquery.slicknav.js}"></script>
			<script th:src="@{/shoptemplate/js/mixitup.min.js}"></script>
			<script th:src="@{/shoptemplate/js/owl.carousel.min.js}"></script>
			<script th:src="@{/shoptemplate/js/main.js}"></script>
		</th:block>

		<script>
		 var token = $("meta[name='_csrf']").attr("content");
		 var header = $("meta[name='_csrf_header']").attr("content");
		 let id = "[[${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:''}]]";	
			$('#cateInsert').on("click", function(){
				let cateName= $('#cateName').val();
				let cateScope = $('#cateScope').val();
				console.log("ë¸ë¡ê·¸ ìì´ë"+id);
				$.ajax({
					url: '/blog/cateInsert',
					method: 'POST',
					contentType: 'application/x-www-form-urlencoded',
					data : { "categoryName": cateName,
							 "publicScope" : cateScope,
							      "blogId" : id },
					beforeSend : function(xhr)
		               {   /*ë°ì´í°ë¥¼ ì ì¡íê¸° ì ì í¤ëì csrfê°ì ì¤ì íë¤*/
		               xhr.setRequestHeader(header, token);
		               },
		            success: function(result){
		            	console.log(result);
// 		            	location.reload();
		            	location.href='/blog/myblog/blogCategory?blogId='+id;
		            },
		            error: function(error){
		            	console.log(error);
		            }
				})
				
			})
			
			$('#cateDelete').on("click", function(){
				$(".checkList").each(function(index,item){
					if($(this).is(":checked")==true){
// 						console.log($(this).parent());
						let cateId = $(this).val();
						let removeCate = $(this).parent();
						console.log(removeCate.parent());
						$.ajax({
							url: '/blog/cateDelete',
							method: 'POST',
							contentType: 'application/x-www-form-urlencoded',
							data:{"categoryId": cateId},
							beforeSend : function(xhr)
				               {   /*ë°ì´í°ë¥¼ ì ì¡íê¸° ì ì í¤ëì csrfê°ì ì¤ì íë¤*/
				               xhr.setRequestHeader(header, token);
				               },
							success : function(result){
								removeCate.remove();
								console.log(cateId);
								
							},
							error : function(error){
								console.log(error);
							}
						})
					}
				})
			})
			
			
		</script>
	</div>
	</div>
</body>
</html>