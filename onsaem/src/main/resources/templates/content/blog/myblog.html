<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">
<head>
<meta charset="UTF-8">
<meta name="description" content="Ogani Template">
<meta name="keywords" content="Ogani, unica, creative, html">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

<!-- Css  -->
<th:block layout:fragment="css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/font-awesome.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/elegant-icons.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/nice-select.css}"
		type="text/css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/shop/css/jquery-ui.min.css}"
		type="text/css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/owl.carousel.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/slicknav.min.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/style.css}"
		type="text/css">
</th:block>

<style>
/* ëª¨ë¨¼íŠ¸ */
@import
	url("https://fonts.googleapis.com/css?family=Cardo:400i|Rubik:400,700&display=swap")
	;

:root {
	-d: 700ms;
	-e: cubic-bezier(0.19, 1, 0.22, 1);
	-font-sans: "Rubik", sans-serif;
	-font-serif: "Cardo", serif;
}

* {
	box-sizing: border-box;
}

.mmtpage-content {
	display: grid;
	grid-gap: 1rem;
	padding: 1rem;
	max-width: 1024px;
	margin: 0 auto;
	font-family: var(- -font-sans);
}

@media ( min-width : 600px) {
	.mmtpage-content {
		grid-template-columns: repeat(2, 1fr);
	}
}

@media ( min-width : 800px) {
	.mmtpage-content {
		grid-template-columns: repeat(4, 1fr);
	}
}

.mmtcard {
	position: relative;
	display: flex;
	align-items: flex-end;
	overflow: hidden;
	padding: 1rem;
	width: 100%;
	text-align: center;
	color: whitesmoke;
	background-color: whitesmoke;
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1), 0 2px 2px rgba(0, 0, 0, 0.1),
		0 4px 4px rgba(0, 0, 0, 0.1), 0 8px 8px rgba(0, 0, 0, 0.1), 0 16px
		16px rgba(0, 0, 0, 0.1);
}

@media ( min-width : 600px) {
	.mmtcard {
		height: 350px;
		background-repeat: no-repeat;
		background-size: cover;
	}
}

.mmtcard:before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 110%;
	background-size: cover;
	background-position: 0 0;
	transition: transform calc(var(- -d)* 1.5) var(- -e);
	pointer-events: none;
}

.mmtcard:after {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 200%;
	pointer-events: none;
	background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%,
		rgba(0, 0, 0, 0.009) 11.7%, rgba(0, 0, 0, 0.034) 22.1%,
		rgba(0, 0, 0, 0.072) 31.2%, rgba(0, 0, 0, 0.123) 39.4%,
		rgba(0, 0, 0, 0.182) 46.6%, rgba(0, 0, 0, 0.249) 53.1%,
		rgba(0, 0, 0, 0.32) 58.9%, rgba(0, 0, 0, 0.394) 64.3%,
		rgba(0, 0, 0, 0.468) 69.3%, rgba(0, 0, 0, 0.54) 74.1%,
		rgba(0, 0, 0, 0.607) 78.8%, rgba(0, 0, 0, 0.668) 83.6%,
		rgba(0, 0, 0, 0.721) 88.7%, rgba(0, 0, 0, 0.762) 94.1%,
		rgba(0, 0, 0, 0.79) 100%);
	transform: translateY(-50%);
	transition: transform calc(var(- -d)* 2) var(- -e);
}

.mmtcard:before {
	/*   background-image: url(https://images.unsplash.com/photo-1517021897933-0e0319cfbc28?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=400&fit=max&ixid=eyJhcHBfaWQiOjE0NTg5fQ); */
	
}

.mmtcontent {
	position: relative;
	display: flex;
	flex-direction: column;
	align-items: center;
	width: 100%;
	padding: 1rem;
	transition: transform var(- -d) var(- -e);
	z-index: 1;
}

.mmtcontent>*+* {
	margin-top: 1rem;
}

.mmttitle {
	font-size: 1.3rem;
	font-weight: bold;
	line-height: 1.2;
}

.mmtcopy {
	font-family: var(- -font-serif);
	font-size: 1.125rem;
	font-style: italic;
	line-height: 1.35;
}

.mmtbtn {
	cursor: pointer;
	margin-top: 1.5rem;
	padding: 0.75rem 1.5rem;
	font-size: 0.65rem;
	font-weight: bold;
	letter-spacing: 0.025rem;
	text-transform: uppercase;
	color: white;
	background-color: black;
	border: none;
}

.mmtbtn:hover {
	background-color: #0d0d0d;
}

.mmtbtn:focus {
	outline: 1px dashed yellow;
	outline-offset: 3px;
}

@media ( hover : hover) and (min-width: 600px) {
	.mmtcard:after {
		transform: translateY(0);
	}
	.mmtcontent {
		transform: translateY(calc(100% - 4.5rem));
	}
	.mmtcontent>*:not(.mmttitle) {
		opacity: 0;
		transform: translateY(1rem);
		transition: transform var(- -d) var(- -e), opacity var(- -d) var(- -e);
	}
	.mmtcard:hover, .mmtcard:focus-within {
		align-items: center;
	}
	.mmtcard:hover:before, .mmtcard:focus-within:before {
		transform: translateY(-4%);
	}
	.mmtcard:hover:after, .mmtcard:focus-within:after {
		transform: translateY(-50%);
	}
	.mmtcard:hover .mmtcontent, .mmtcard:focus-within .mmtcontent {
		transform: translateY(0);
	}
	.mmtcard:hover .mmtcontent>*:not(.mmttitle), .mmtcard:focus-within .mmtcontent>*:not(.mmttitle)
		{
		opacity: 1;
		transform: translateY(0);
		transition-delay: calc(var(- -d)/8);
	}
	.mmtcard:focus-within:before, .mmtcard:focus-within:after, .mmtcard:focus-within .mmtcontent,
		.mmtcard:focus-within .mmtcontent>*:not(.mmttitle) {
		transition-duration: 0s;
	}
}

/* í”„ë¡œí•„ì¹´ë“œ */
@import url(https://fonts.googleapis.com/css?family=Roboto:300,400,600);

.snip1336 {
	font-family: 'Roboto', Arial, sans-serif;
	position: relative;
	overflow: hidden;
	margin: 10px;
	min-width: 230px;
	max-width: 315px;
	width: 100%;
	color: #ffffff;
	text-align: left;
	line-height: 1.4em;
	background-color: #141414;
}

.snip1336 * {
	-webkit-box-sizing: border-box;
	box-sizing: border-box;
	-webkit-transition: all 0.25s ease;
	transition: all 0.25s ease;
}

.snip1336 img {
	max-width: 100%;
	vertical-align: top;
	opacity: 0.85;
}

.snip1336 figcaption {
	width: 100%;
	background-color: #141414;
	padding: 25px;
	position: relative;
}

.snip1336 figcaption:before {
	position: absolute;
	content: '';
	bottom: 100%;
	left: 0;
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 55px 0 0 400px;
	border-color: transparent transparent transparent #141414;
}

.snip1336 figcaption a {
	padding: 5px;
	border: 1px solid #ffffff;
	color: #ffffff;
	font-size: 0.7em;
	text-transform: uppercase;
	margin: 10px 0;
	display: inline-block;
	opacity: 0.65;
	width: 47%;
	text-align: center;
	text-decoration: none;
	font-weight: 600;
	letter-spacing: 1px;
}

.snip1336 figcaption a:hover {
	opacity: 1;
}

.snip1336 .profile {
	border-radius: 50%;
	position: absolute;
	bottom: 100%;
	left: 25px;
	z-index: 1;
	max-width: 90px;
	opacity: 1;
	box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}

.snip1336 .follow {
	margin-right: 4%;
	border-color: #2980b9;
	color: #2980b9;
}

.snip1336 h2 {
	margin: 0 0 5px;
	font-weight: 300;
	color: white;
}

.snip1336 h2 span {
	display: block;
	font-size: 0.5em;
	color: #2980b9;
}

.snip1336 p {
	margin: 0 0 10px;
	font-size: 0.8em;
	letter-spacing: 1px;
	opacity: 0.8;
}

/* GENERAL STYLES */
.pagination ul {
	margin: auto;
	padding: 0;
	list-style: none;
}

/* ONE */
.p1 li {
	font-size: 14px;
	width: 40px;
	height: 40px;
	line-height: 40px;
	padding: 0;
	text-align: center;
	float: left;
	cursor: pointer;
}
</style>
</head>
<body>
	<!-- Content -->

	<div layout:fragment="content">

		<!-- Breadcrumb Section Begin -->
		<section class="breadcrumb-section set-bg"
			th:data-setbg="@{/shoptemplate/img/breadcrumb.jpg}">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 text-center">
						<div class="breadcrumb__text">
							<h2>Blog</h2>
							<div class="breadcrumb__option">
								<a href="./index.html">Home</a> <span>Blog</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- Breadcrumb Section End -->
		<!--  ëª¨ë¨¼íŠ¸ -->
		<div class="blog__sidebar">
			<div class="blog__sidebar__item">
				<h3 style="text-align: center; margin: 0 auto;">
					MOMENT <a data-bs-toggle="modal" data-bs-target="#insertModal"
						type="button" th:if="${mmtCnt<4}">â–¶</a> <a type="button"
						th:if="${mmtCnt==4}"
						onclick="alert('ğŸ˜¥ ì €ì¥ ê°€ëŠ¥í•œ ëª¨ë¨¼íŠ¸ ìš©ëŸ‰ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚­ì œ í›„ ë“±ë¡í•´ì£¼ì„¸ìš”!')">âœ–</a>
				</h3>
			</div>
		</div>

		<main class="mmtpage-content">

			<!-- ëª¨ë‹¬ì°½ ë„ìš°ëŠ” ë²„íŠ¼ -->
			<a th:each="moment : ${moments}" data-bs-toggle="modal" data-bs-target="#exampleModal" id="modalBtn"> 
			<input type="hidden" id="mmtId" th:value="${moment.momentId}">

				<div class="mmtcard inputfield" id="preview-image"
					th:style="'background: url('+@{'/fileView/'+${moment.fileRoute}}+');background-repeat:no-repeat;background-size:cover;'">

					<div class="mmtcontent">
						<h2 class="mmttitle">@[[${moment.blogId}]]</h2>
						<p class="mmtcopy">[[${moment.momentWrite}]]</p>
						<button class="mmtbtn">more</button>
					</div>
				</div>
			</a>
		</main>
		<!-- ëª¨ë¨¼íŠ¸ ë -->
		<!-- Blog Section Begin -->
		<section class="blog spad">
			<div class="container">
				<div class="row">
					<div class="col-lg-4 col-md-5">
						<div class="blog__sidebar">

							<!-- í”„ë¡œí•„ ì¹´ë“œ -->
							<figure class="snip1336">
								<img
									src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/331810/sample69.jpg"
									alt="sample69" />
								<figcaption>
									
									<img th:if="${blogInfo.fileRoute != null}"
										th:src="'/fileView/'+${blogInfo.fileRoute}"
										alt="profile-sample5" class="profile" />
									<img th:if="${blogInfo.fileRoute == null}"
										th:src="@{/images/defaulltProfile.png}"
										alt="profile-sample5" class="profile" />
									
									
									<h2>
										[[${blogInfo.nickname}]]<span>@[[${blogInfo.blogId}]]</span>
									</h2>
									<p>[[${blogInfo.introduction}]]</p>
									<a class="follow" type="button" th:value=${subCount}>êµ¬ë…</a>
									<a  th:unless="${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:''} == ${blogInfo.blogId}"
										style="display:none"
										th:href="@{/blog/myblog/blogTask(blogId=${blogInfo.blogId})}"
										class="info">ë¸”ë¡œê·¸ ê´€ë¦¬ âš™</a> 
									<a  th:if="${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:''} == ${blogInfo.blogId}"
										th:href="@{/blog/myblog/blogTask(blogId=${blogInfo.blogId})}"
										class="info">ë¸”ë¡œê·¸ ê´€ë¦¬ âš™</a>
									<!-- ë¡œê·¸ì¸í•œ ì•„ì´ë””ì™€ ë¸”ë¡œê·¸ ì£¼ì¸ì´ ê°™ìœ¼ë©´ ë³´ì´ê²Œ -->
								</figcaption>
							</figure>
							<!-- í”„ë¡œí•„ ì¹´ë“œ ë -->

							<div class="blog__sidebar__search">
									<input type="text" placeholder="Search..." id="searchWord">
									<button type="button" id="searchBtn">
										<span class="icon_search"></span>
									</button>
							</div>
							<!--[[${param.userId}]]  ìœ ì € ì´ë¦„í™•ì¸-->
							<div class="blog__sidebar__item">
								<a th:href="@{/blog/myblog/blogWrite/blogInsert}"
									class="blog__btn">ê¸€ ì‘ì„±<span class="arrow_right"></span></a>
								<h4>Categories</h4>
								<ul th:each="cate:${category}">
									<li><a class="searchCate" th:value="${cate.categoryId}" style="cursor:pointer">[[${cate.categoryName}]]</a></li>
								</ul>
							</div>
							<div class="blog__sidebar__item">
								<h4>Recent News</h4>
								<div class="blog__sidebar__recent">
									<a href="#" class="blog__sidebar__recent__item"
										th:each="rW:${recentWrite}">
										<div class="blog__sidebar__recent__item__pic">
											<img th:src="@{/shoptemplate/img/blog/sidebar/sr-1.jpg}"
												alt="">
										</div>
										<div class="blog__sidebar__recent__item__text">
											
											<h6 th:onclick="|location.href='@{/blog/myblog/blogWrite(bno=${rW.writeId})}'|">
												[[${rW.writeTitle}]]<br /> -[[${rW.subTitle}]]
											</h6>
											<span>[[${#dates.format(rW.writeDate, 'YYYY-MM-DD')}]]</span>
											
										</div>
									</a>
								</div>
							</div>
							<!-- êµ¬ë…ì ëª©ë¡ -->
							<div class="blog__sidebar__item">
								<h4>êµ¬ë…ì ëª©ë¡</h4>
								<a th:href="@{/blog/myblog/blogSubscribe(blogId=${blogInfo.blogId})}" 
								   style="float: right;margin-right:50px;">ëª©ë¡ ë”ë³´ê¸° â•</a>
								<div class="blog__sidebar__recent">
									<table id="submeTable">
										<thead>
											<tr>
												<th></th>
												<th class="shoping__product">ë‚˜ë¥¼ êµ¬ë…í•œ ì‚¬ëŒID</th>
											</tr>
										</thead>
										<tbody>
											<th:block th:each="subMe:${subMeList}">
												<tr>
													<td class="shoping__cart__item"
														style="width: 70px; height: 70px; padding: 5px 0px;">
														<img th:if="${subMe.fileRoute == null}"
															th:src="@{/images/defaulltProfile.png}"
															alt="profile-sample5" class="profile" />
														<img th:if="${subMe.fileRoute != null}"
															th:src="'/fileView/'+${subMe.fileRoute}"
															alt="profile-sample5" class="profile" />
													</td>
													<td><a th:href="@{/blog/myblog(userId=${subMe.memberId})}"><h5 th:text="${subMe.memberId}"></h5></a></td>
												</tr>
											</th:block>
										</tbody>
									</table>

									<table id="mySubTable">
										<thead>
											<tr>
												<th></th>
												<th class="shoping__product">ë‚´ê°€ êµ¬ë…í•œ ì‚¬ëŒID</th>
											</tr>
										</thead>
										<tbody>
											<th:block th:each="mySub:${mySubList}" > 
												<tr>
													<td class="shoping__cart__item"
														style="width: 70px; height: 70px; padding: 5px 0px;">
														<img th:if="${mySub.fileRoute == null}"
															th:src="@{/images/defaulltProfile.png}"
															class="profile" />
														<img th:if="${mySub.fileRoute != null}"
															th:src="'/fileView/'+${mySub.fileRoute}"
															class="profile" />
													</td>
													<td><a th:href="@{/blog/myblog(userId=${mySub.groupId})}"><h5 th:text="${mySub.groupId}"></h5></a></td>
												</tr>
											</th:block>
										</tbody>
									</table>
								</div>
							</div>
							<!-- êµ¬ë…ì ëª©ë¡ ë -->
						</div>
					</div>
					<div class="col-lg-8 col-md-7">
						<div class="row blogList">
						
							
						</div>
					</div>
					
					
					
				</div>
			</div>
		</section>
		<!-- Blog Section End -->

		<!-- í´ë¡  -->
		<div class="template" style="display:none">
			<div class="col-lg-6 col-md-6 col-sm-6">
				<div class="blog__item">
					<div class="blog__item__pic">
						<input type="hidden" class="thumbnail">
						<!-- ì¸ë„¤ì¼ -->
						<img id="thumbImg">
					</div>
					<div class="blog__item__text">
						<ul>
							<li><i class="fa fa-calendar-o"></i></li>
							<li><i class="fa fa-comment-o"></i></li>
							<li><i class="fa-solid fa-eye"></i></li>
						</ul>
						<h5>
							<a></a>
						</h5>
						<p/>
						<a class="blog__btn">READ MORE <span class="arrow_right"></span></a>
					</div>
				</div>
			</div>
		</div>

		<!-- ëª¨ë‹¬ì°½ ì¡°íšŒ -->
		<div class="modal fade" id="exampleModal" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-xl modal-dialog-scrollable">
				<div class="modal-content">

					<div class="modal-body row">
						<div class="col-md-6 modal-image sticky-top">
							<img id="modalImg"
								src="https://unsplash.it/800/1200.jpg?image=256"
								class="img-fluid sticky-top">
						</div>
						<div class="col-md-6 p-3">
							<span class="round"><img
								src="https://www.thispersondoesnotexist.com/image" alt="user"
								width="50"></span>
							<h3 class="mt-3" style="font-weight: bold">ë‹‰ë„¤ì„</h3>

							<p id="nickname">Edited Â· 1d</p>
							<button class="mmtbtn" style="color: red;" id="mmtDelBtn">delete</button>
							<div class="mt-2 mx-2">
								<input type="text" class="form-control"
									placeholder="type comment" id="addUrl" readonly>
							</div>

							<div class="d-flex flex-row comment-row mt-2">
								<div class="p-2"></div>
								<div class="comment-text active w-100">
									<h5 id="mmtWrite">ë‚´ìš©</h5>
								</div>
							</div>
							<p id="uploadDate"></p>
							<!-- í•˜íŠ¸ ì‹œê°„ ë‚¨ìœ¼ë©´-->
							
							<!-- í•˜íŠ¸ ë -->
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- ëª¨ë‹¬ì°½ ë -->

		<!-- ëª¨ë¨¼íŠ¸ ì‘ì„± -->
		<div class="modal fade" id="insertModal" tabindex="-1"
			aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-xl modal-dialog-scrollable">
				<div class="modal-content">

					<div class="modal-body row">
						<div class="col-md-6 modal-image sticky-top">
							<h3>ìƒì„¸ ë‚´ìš©</h3>
							<textarea id="momentWrite" cols="58" rows="20"
								placeholder="500ì ë¯¸ë§Œìœ¼ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”"></textarea>
						</div>
						<div class="col-md-6 p-3">

							<input type="text" class="form-control"
								placeholder="ì²¨ë¶€í•  ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="insertUrl"> <br>
							<fieldset>
								<h3>ì—…ë¡œë“œ ê¸°ê°„</h3>
								<input type="date" id="date" placeholder="Select a date"
									data-datepicker-events="{date: '2020-07-12T12:00', name: 'Business Lunch ZÃ¼rich', type: 'holiday'}"
									required /> <br>
								<h3>ê³µê°œë²”ìœ„</h3>
								<select name="publicScope" id="scope">
									<!-- ê³µê°œë²”ìœ„ ë¶€ë¶„ ë‚˜ì¤‘ì— value ìˆ˜ì • í•„ìš” -->
									<option value="public">ì „ì²´ê³µê°œ</option>
									<option value="partial" selected>ì¼ë¶€ê³µê°œ</option>
									<option value="private">ë¹„ê³µê°œ</option>
								</select>
							</fieldset>
							<div class="mt-2 mx-2"></div>

							<div class="d-flex flex-row comment-row mt-2">
								<form id="momentFrm">
									<div class="p-2">
										ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
										<div class="image-container">
											<img style="width: 500px;" id="preview-image2"
												src="https://dummyimage.com/500x500/ffffff/000000.png&text=preview+image">
											<input style="display: block;" type="file" name="uploadfile"
												multiple="multiple" id="input-image">
										</div>
									</div>
								</form>
							</div>
							<input type="hidden" id="getblogId" th:value="${blogInfo.blogId}">
							<button type="button" id="mmtInsertBtn">ë“±ë¡</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- ëª¨ë¨¼íŠ¸ ì‘ì„± ë -->

		<!-- JS -->
		<th:block layout:fragment="script">
			<script th:src="@{/shoptemplate/js/jquery-3.3.1.min.js}"></script>
			<script th:src="@{/shoptemplate/js/bootstrap.min.js}"></script>
			<script th:src="@{/shoptemplate/js/jquery.nice-select.min.js}"></script>
			<script th:src="@{/shoptemplate/js/jquery-ui.min.js}"></script>
			<script th:src="@{/shoptemplate/js/jquery.slicknav.js}"></script>
			<script th:src="@{/shoptemplate/js/mixitup.min.js}"></script>
			<script th:src="@{/shoptemplate/js/owl.carousel.min.js}"></script>
			<script th:src="@{/shoptemplate/js/main.js}"></script>
			<script src="https://kit.fontawesome.com/fef5f4c5da.js" crossorigin="anonymous"></script>
		</th:block>

		<!-- moment -->
		<script type="text/javascript">
			
			//csrfì„¤ì •
			 var token = $("meta[name='_csrf']").attr("content");
			 var header = $("meta[name='_csrf_header']").attr("content");	
			
			// ë¸”ë¡œê·¸ ì•„ì´ë”” ê°€ì ¸ì˜¤ê¸°
			let blogId = $('#getblogId').val();
// 			console.log("ë¸”ë¡œê·¸ ì•„ì´ë”” ì°¾ì•„ìš”~!"+blogId);

			// ê²€ìƒ‰í•  ë•Œ ê°’ ë„£ê¸°
			let nowData = {"writeTitle" : null, 
						   "blogId": blogId}; 
			
			// êµ¬ë…í–ˆëŠ”ì§€ í™•ì¸í•˜ê¸°
			let subTF = $('.follow').attr('value');
			
			// í˜ì´ì§• í•  ë•Œ ë¦¬ìŠ¤íŠ¸ í´ë¡ í•˜ê¸°
			let listClone = $(".template").find(".col-md-6").first();
			
			// ì¢‹ì•„ìš” ì¡°íšŒ
			let likeTF = $('.blogLike').val();
			
			// ê²€ìƒ‰í• ë•Œ ê°’ ë„£ëŠ” ê³³
			function dataMake(){
				let data = {};
				if($("#searchWord").val()){
					data['writeTitle'] = $("#searchWord").val();
					data['blogId'] = blogId;
				}
				return data;
			}
			
			// ì œëª© ê²€ìƒ‰
			$("#searchBtn").on("click", function(){
				nowData = dataMake();
				newBlogList(1);
			})
			
			// ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰
			$(".searchCate").each(function(){
				$(this).on("click", function(){
					let categoryId = $(this).attr("value"); // valueëŠ” inputì•„ë‹ˆë©´ attrë¡œ ê°€ì ¸ì˜¤ê¸°!!!!!
					nowData = {"categoryId" : categoryId,
							   "blogId" : blogId};
					newBlogList(1);
				})
			})
			
			

			
			// moment ëª¨ë‹¬
			//moment ë“±ë¡ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, ì…ë ¥ëœ ê°’ì„ DBë¡œ ë³´ë‚´ê¸°
			$("#mmtInsertBtn").on("click", function(){
				let data = new FormData($('#momentFrm')[0]); //ì•„ì´ë””ê°€ momentFrmì„ ê°€ì ¸ì˜¨ë‹¤.
				
				data.append("momentWrite", $('#momentWrite').val());
				data.append("addUrl", $('#insertUrl').val());
				data.append("uploadEnd", $('#date').val());
				data.append("publicScope",$('#scope').val());  //ì»¨íŠ¸ë¡¤ëŸ¬ì— ê°€ì ¸ê°ˆ ë‚´ìš©ì„ ë‹´ëŠ”ë‹¤.
				
				console.log(data.get("uploadfile"));
				
				$.ajax({
					url : '/blog/insertMoment',
					enctype: 'multipart/form-data',
					method : 'POST',
					processData: false,
					contentType: false,
					data : data,
					beforeSend : function(xhr)
		               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
		               xhr.setRequestHeader(header, token);
		               },
					dataType:'json',
					success : function(result) {
						alert('ì„±ê³µ');
						location.href="/blog/myblog?userId=[[${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:''}]]";
					},
					error : function(error) {
						console.log(error);
						alert('ì‹¤íŒ¨');
					}
				})
			})
			
			// moment ëª¨ë‹¬ ìƒì„¸ë³´ê¸° ëª¨ë¨¼íŠ¸ë²ˆí˜¸ ë³´ë‚´ê¸°
			$(".mmtpage-content").children("#modalBtn").each(function(){ 
				$(this).on("click", function(){
					console.log(this);
					let mno = $(this).children('#mmtId').val();
					console.log(mno);
	 				$.ajax({
	 					url: '/blog/getMoment',
	 					method: 'post',
	 					contentType: 'application/x-www-form-urlencoded',
	 					data: {"momentId": mno},
	 					beforeSend : function(xhr)
	 	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	 	               xhr.setRequestHeader(header, token);
	 	               },
	 					success: function(result){
	 						$('#exampleModal').modal('show');
	 						console.log(result);
 	 						$(".mt-3").text(result.nickname);
 	 						$("#modalImg").attr("src", "/fileView/"+result.fileRoute);
 	 						$("#addUrl").attr("placeholder",result.addUrl);
 	 						$("#mmtWrite").text(result.momentWrite);
							$("#nickname").text("@"+result.blogId+" Â· "+result.writeDate.substr(0,10)+" "+result.writeDate.substr(11,5));
							$("#uploadDate").text(result.uploadStart.substr(0,10)+" - "+result.uploadEnd.substr(0,10));
	 					},
	 					error: function (error){
	 						console.log(error);
	 					}
	 				})
				})
				
				
			})
			
			
			
			
			
			// ëª¨ë‹¬ ë
			
			
			// input fileì— change ì´ë²¤íŠ¸ ë¶€ì—¬
			const inputImage = document.getElementById("input-image")
			inputImage.addEventListener("change", function(e) {
				console.log('í™•ì¸');
			    readImage(e.target);
			})
			// ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
			function readImage(input) {
			    // ì¸í’‹ íƒœê·¸ì— íŒŒì¼ì´ ìˆëŠ” ê²½ìš°
			    if(input.files && input.files[0]) {
			        // ì´ë¯¸ì§€ íŒŒì¼ì¸ì§€ ê²€ì‚¬ (ìƒëµ)
			        // FileReader ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
			        const reader = new FileReader();
			        // ì´ë¯¸ì§€ê°€ ë¡œë“œê°€ ëœ ê²½ìš°
			        // readerê°€ ì´ë¯¸ì§€ ì½ë„ë¡ í•˜ê¸°
			        reader.readAsDataURL(input.files[0]);
			        reader.onload = e => {
			            const previewImage = document.getElementById("preview-image2");
			            console.log('í™•ì¸22');
			            previewImage.src = e.target.result;
			            console.log(previewImage.src);
			        }
			        
			    }
			}
			
			// êµ¬ë…
			if(subTF == 'T'){ // ë§Œì•½ ê°’ì´ ìˆë‹¤ë©´
				$(".follow").css({'background-color':'#2980b9','color':'white','border-color':'white'});
			}else{
				$(".follow").css({'background-color':'','color':'#2980b9','border-color':'#2980b9'});
			}
			
			
			//êµ¬ë… ì €ì¥
			$(".follow").on("click", function(){
				let id = "[[${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:''}]]";
				if(id!=""){
					if(subTF =='F'){ // êµ¬ë…í•˜ì§€ ì•Šì•˜ë‹¤ë©´~
						$(this).css({'background-color':'#2980b9','color':'white','border-color':'white'});
						
						$.ajax({
							url: '/blog/addSub',
							method: 'post',
							contentType: 'application/x-www-form-urlencoded',
							data: {"groupId":blogId},
							beforeSend : function(xhr)
				               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
				               xhr.setRequestHeader(header, token);
				               },
							success: function(result){
								console.log(result);
								alert("êµ¬ë… ì™„ë£Œ");
								
								subTF = 'T';
							},
							error: function(error){
								console.log(error);
							}
						})
					
				}else{
				//êµ¬ë… ì·¨ì†Œ
		 				$(this).css({'background-color':'','color':'#2980b9','border-color':'#2980b9'});
						
		 				$.ajax({
		 					url: '/blog/delSub',
		 					method: 'post',
		 					contentType: 'application/x-www-form-urlencoded',
							data: {"groupId":blogId, "memberId": id},
							beforeSend : function(xhr)
				               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
				               xhr.setRequestHeader(header, token);
				               },
							success: function(result){
								console.log(result);
								alert("êµ¬ë… ì·¨ì†Œ");
								
								subTF = 'F';
							},
							error: function(error){
								console.log(error);
							}
		 				});
				}
			}else{
					alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
				}
			});
			
			
			
// 			console.log($("document").find('#mmtDelBtn'));
			$("#mmtDelBtn").each(function(){
				console.log(this);
				$(this).on("click", function(){
					let momentId = $('#mmtId').val();
					console.log("momentID: "+momentId);
	 				$.ajax({
	 					url: '/blog/momentDel',
	 					method: 'post',
	 					contentType: 'application/x-www-form-urlencoded',
	 					data: {"momentId":momentId},
	 					beforeSend : function(xhr)
	 	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	 	               xhr.setRequestHeader(header, token);
	 	               },
	 					success: function(result){
	 						console.log(result);
	 						alert("ì‚­ì œì™„ë£Œ");
	 						location.href="/blog/myblog?userId=[[${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:''}]]";
	 					},
	 					error: function(error){
	 						console.log(error);
	 					}
	 				});
				});
			});
			
			
			// í˜ì´ì§€ ì´ë™
			$(".blogList").on("click","#pageNum",function(e){
				newBlogList($(e.target).text());
			});

		
			
			
			// í˜ì´ì§• ë§Œë“¤ê¸° ì´ê±´ ë³¸ì¸ cssë‚˜ htmlì— ë§ì¶°ì„œ í• ê²ƒ
			function makePageing(page){
				// ê°€ì ¸ì˜¨ ê²°ê³¼ê°’ì´ 0ê°œë©´ ë¦¬í„´
				if(page.totalRecord == 0){
					return;
				}
				// í˜ì´ì§•ì„ ë„£ì„ div, ul ìƒì„±
				let pagination = $("<div/>").addClass("pagination p1");
				let ul = $("<ul/>");
				// í˜ì´ì§• ì‹œì‘ë¶€ë¶„ì´ 1ë³´ë‹¤ í¬ë©´ ì´ì „ìœ¼ë¡œ ê°€ê¸° ë²„íŠ¼ ìƒì„± ex) <<
				if(page.startPage > 1){
					$(ul).append($("<li/>").html("&laquo;").css("font-size","30px").on("click",function(){newBlogList(page.startPage-page.pageSize)}));
				}
				// í˜ì´ì§€ ìƒì„±  ex) 1 2 3 4 5
				for(let i = page.startPage; i <= page.endPage; i++){
					if(page.page == i){
						// í˜„ì¬í˜ì´ì§€ì™€ ë§ëŠ” í˜ì´ì§€ëŠ” ì •í•´ì§„ cssê°€ ì…í˜€ì„œ ìƒì„±
						$(ul).append($("<li/>").text(i).css("background-color","#2ecc71").css("border-radius","100%").css("color","#fff"));
					}else {
						$(ul).append($("<li/>").text(i).attr("id","pageNum").on("click",function(){newBlogList($(this).text());}));
					}
				}
				// í˜ì´ì§• ëë¶€ë¶„ì´ í˜ì´ì§• ë§ˆì§€ë§‰í˜ì´ì§€ë³´ë‹¤ ì‘ìœ¼ë©´ ë‹¤ìŒìœ¼ë¡œ ê°€ê¸° ë²„íŠ¼ ìƒì„± ex) >>
				if(page.endPage < page.lastPage){
					$(ul).append($("<li/>").html("&raquo;").css("font-size","30px").on("click",function(){newBlogList(page.startPage+page.pageSize)}));
				}
				// ì™„ì„±ëœ í˜ì´ì§•ì„ ë„£ê¸°
				pagination.append(ul);
				return pagination;
			}
			
			
			// ë¸”ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°
			function makeBlogList(item){
				console.log("ì´ì•¼!!!!!!!!!!!!!!!!!!!!!!!!!"+item.blogId);
				let makeClone = $(listClone).clone();
				$(makeClone).find(".blog__item__pic").find("input[type=hidden].thumbnail").val(item.blogWrite);
				$(makeClone).find(".blog__item__pic").find("img").attr("src",item.fileRoute);
				$(makeClone).find(".blog__item__text").find("i.fa-calendar-o").text(" "+item.writeDate.substr(0,10));
				$(makeClone).find(".blog__item__text").find("i.fa-comment-o").text(" "+item.replyCnt);
				$(makeClone).find(".blog__item__text").find("i.fa-eye").text(" "+item.cnt);
				$(makeClone).find(".blog__item__text").find("a:eq(0)").attr("href","/blog/myblog/blogWrite?bno="+item.writeId+"&userId="+item.blogId).text(item.writeTitle);
				$(makeClone).find(".blog__item__text").find("p").text(item.subTitle);
				$(makeClone).find(".blog__item__text").find("a.blog__btn").attr("href","/blog/myblog/blogWrite?bno="+item.writeId).text("READ MORE");
				
				return makeClone;
			}
			
			
			// ë¸”ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
			function newBlogList(page){
				let data = nowData;
				data['page'] = page;
				
		        console.log(data);
		        $.ajax({
		        	url: '/blog/blogSearch',
			      method: 'GET',
			      contentType: 'application/x-www-form-urlencoded',
			      data: data,
			      success: function (result) {
					 $(".row").find(".col-sm-6").detach();
					 $(".row").find(".pagination").detach();
					 $(result["blogList"]).each(function(index, item){
						$(".blogList").append(makeBlogList(item));
					 })
					 // í˜ì´ì§• ìƒˆë¡œ ìƒì„±
					 $(".blogList").append(makePageing(result["newPaging"]));
			      },
			      error: function (error) {
			         console.log(error);
			         alert('ì‹¤íŒ¨');
			      }
		        })
			}
			
 			// ë§ˆì´ë¸”ë¡œê·¸ ë“¤ì–´ì˜¤ìë§ˆì 1í˜ì´ì§€ë¡œ ë³´ì—¬ì£¼ê¸°
			newBlogList(1);
		</script>
	</div>
</body>
</html>