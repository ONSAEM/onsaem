<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<!-- index.html Í≥†Ïú† CSS Ï∂îÍ∞Ä -->
<th:block layout:fragment="css">
	<!--    <link rel="stylesheet" th:href="@{/css/page/home.css}" >-->
	<link rel="stylesheet" th:href="@{/challengers/css/mycss.css}">
	<link rel="stylesheet" th:href="@{/challengers/css/nomargin.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/challengers/css/mypage.css}" >

</th:block>
<head>
<style>
	.app-content{
	width: 70%;
    margin: auto;
	}
	button {
   all: unset;
   background-color: mediumslateblue;
   color: white;
   padding: 5px 25px;
   border-radius: 10px;
   cursor: pointer;
	}
	
	.btn {
	   margin-top: 60px;
	}
	
	.modal {
	   display: flex;
	   justify-content: center;
	   align-items: center;
	   position: fixed;
	   top: 0;
	   left: 0;
	   width: 100%;
	   height: 100%;
	}
	
	.modal__background {
	   background-color: rgba(0, 0, 0, 0.6);
	   width: 100%;
	   height: 100%;
	   position: absolute;
	}
	
	.modal__content {
	   text-align: center;
	   position: relative;
	   background-color: white;
	   border-radius: 10px;
	   top: 0;
	   padding: 10px 25px;
	   width: 20%;
	}
	
	h1 {
	   margin: 0;
	   margin-bottom: 13px;
	}
	
	.hidden {
	   display: none;
	}
</style>
</head>

<!-- Content -->
<div layout:fragment="content">

	<section class="breadcrumb-section set-bg" th:data-setbg="@{/shoptemplate/img/breadcrumb.jpg}">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>Challengers</h2>
                        <div class="breadcrumb__option">
                            <a href="./index.html">Home</a>
                            <a href="./index.html">Vegetables</a>
                            <span>Vegetable‚Äôs Package</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

	<div class="app-container">


		<div class="app-content">

			<div class="app-sidebar">
				<a href="" class="app-sidebar-link active"> 
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
          <polyline points="9 22 9 12 15 12 15 22" /></svg>
				</a> <a href="" class="app-sidebar-link"> <svg
						class="link-icon feather feather-pie-chart"
						xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						fill="none" stroke="currentColor" stroke-linecap="round"
						stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
          <defs />
          <path
							d="M21.21 15.89A10 10 0 118 2.83M22 12A10 10 0 0012 2v10z" />
        </svg>
				</a> <a href="" class="app-sidebar-link"> <svg
						xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						viewBox="0 0 24 24" fill="none" stroke="currentColor"
						stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
						class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
          <line x1="16" y1="2" x2="16" y2="6" />
          <line x1="8" y1="2" x2="8" y2="6" />
          <line x1="3" y1="10" x2="21" y2="10" /></svg>
				</a> <a href="" class="app-sidebar-link"> <svg
						class="link-icon feather feather-pie-chart"
						xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						fill="none" stroke="currentColor" stroke-linecap="round"
						stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
          <defs />
          <circle cx="12" cy="12" r="3" />
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
        </svg>
				</a>
			</div>
			<div class="projects-section">
				<div class="projects-section-header">
					<p>Projects</p>
					<p class="time">December, 12</p>
				</div>
				<div class="projects-section-line">
					<div class="projects-status">
						<div class="item-status">
							<span class="status-number">45</span> <span class="status-type">In
								Progress</span>
						</div>
						<div class="item-status">
							<span class="status-number">24</span> <span class="status-type">Upcoming</span>
						</div>
						<div class="item-status">
							<span class="status-number">62</span> <span class="status-type">Total
								Projects</span>
						</div>
					</div>
					<div class="view-actions">
						<button class="view-btn list-view" title="List View">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
								viewBox="0 0 24 24" fill="none" stroke="currentColor"
								stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
								class="feather feather-list">
						              <line x1="8" y1="6" x2="21" y2="6" />
						              <line x1="8" y1="12" x2="21" y2="12" />
						              <line x1="8" y1="18" x2="21" y2="18" />
						              <line x1="3" y1="6" x2="3.01" y2="6" />
						              <line x1="3" y1="12" x2="3.01" y2="12" />
						              <line x1="3" y1="18" x2="3.01" y2="18" /></svg>
						</button>
						<button class="view-btn grid-view active" title="Grid View">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
								viewBox="0 0 24 24" fill="none" stroke="currentColor"
								stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
								class="feather feather-grid">
						              <rect x="3" y="3" width="7" height="7" />
						              <rect x="14" y="3" width="7" height="7" />
						              <rect x="14" y="14" width="7" height="7" />
						              <rect x="3" y="14" width="7" height="7" /></svg>
						</button>
					</div>
				</div>
<div class="project-boxes jsGridView">
	<div class="container">

		<div class="profile">

			<div class="profile-image">

				<img src="https://images.unsplash.com/photo-1513721032312-6a18a42c8763?w=152&h=152&fit=crop&crop=faces" alt="">

			</div>

			<div class="profile-user-settings">

				<h1 class="profile-user-name">janedoe_</h1>

				<button class="btn profile-edit-btn">Edit Profile</button>

				<button class="btn profile-settings-btn" aria-label="profile settings"><i class="fas fa-cog" aria-hidden="true"></i></button>

			</div>

			<div class="profile-stats">

				<ul>
					<li><span class="profile-stat-count">164</span> posts</li>
					<li><span class="profile-stat-count">188</span> followers</li>
					<li><span class="profile-stat-count">206</span> following</li>
				</ul>

			</div>

			<div class="profile-bio">

				<p><span class="profile-real-name">Jane Doe</span> Lorem ipsum dolor sit, amet consectetur adipisicing elit üì∑‚úàÔ∏èüèïÔ∏è</p>

			</div>

		</div>
		<!-- End of profile section -->

	</div>
	<!-- End of container -->




	<div class="container">

		<div class="gallery">

			<div class="gallery-item openDetail" tabindex="0" th:each="proof:${proofs}" th:onclick="displayModal([[${proof}]])">

				<img src="https://images.unsplash.com/photo-1511765224389-37f0e77cf0eb?w=500&h=500&fit=crop" class="gallery-image">
					<input type="hidden" id="chalId" th:value="${proof.chalId}">
				<div class="gallery-item-info">

					<ul>
						<li class="gallery-item-likes"><span class="visually-hidden">Likes:</span><i class="fas fa-heart" aria-hidden="true"></i> 56</li>
						<li class="gallery-item-comments"><span class="visually-hidden">Comments:</span><i class="fas fa-comment" aria-hidden="true"></i> 2</li>
					</ul>

				</div>

			</div>

			
		</div>
		<!-- End of gallery -->

		<div class="loader"></div>

	</div>	    

				</div>
			</div>

		</div>
		
		 <!-- Î™®Îã¨Ï∞Ω -->
                  <div class="modal hidden">
                     <div class="modal__background"></div>
                     <div class="modal__content">
                        <div class="modalText">
                        	<p id="writer"></p>
                        	<input type="hidden" id="theId">
                           <img style="width: 500px;" id="preview-image"
                              src="https://dummyimage.com/500x500/ffffff/000000.png&text=preview+image">
		                   <p id="contents"></p>      
                           <table>
                           <thead><tr>
                           			<th>ÎåìÏì¥Ïù¥</th>
                           			<td>ÎåìÍ∏ÄÎÇ¥Ïö©</td>
                           		</tr></thead>
                           		<tbody class="replies">
                           		</tbody>
                           </table>
                           <span>Ï¢ãÏïÑÏöî <p id="cnt"></p></span>
                           <input type="text" id="content" name="content">
                           <button type="button" th:onclick="inputReply()">ÎåìÍ∏ÄÏì∞Í∏∞</button>
                           <button type="button" class="closeBtn">Îã´Í∏∞</button>
                        </div>
                     
                     </div>
                     
                  </div>
                  <!-- Î™®Îã¨Ï∞Ω ÎÅõ-->
		
		<script type="text/javascript">
		/* document.addEventListener('DOMContentLoaded', function () {
	 		 var modeSwitch = document.querySelector('.mode-switch');

	  		modeSwitch.addEventListener('click', function () {
	  			document.documentElement.classList.toggle('dark');
	   		 	modeSwitch.classList.toggle('active');
			  });
			  
			  var listView = document.querySelector('.list-view');
			  var gridView = document.querySelector('.grid-view');
			  var projectsList = document.querySelector('.project-boxes');
			  
			  listView.addEventListener('click', function () {
			    gridView.classList.remove('active');
			    listView.classList.add('active');
			    projectsList.classList.remove('jsGridView');
			    projectsList.classList.add('jsListView');
			  });
			  
			  gridView.addEventListener('click', function () {
			    gridView.classList.add('active');
			    listView.classList.remove('active');
			    projectsList.classList.remove('jsListView');
			    projectsList.classList.add('jsGridView');
			  });
			  
			  document.querySelector('.messages-btn').addEventListener('click', function () {
			    document.querySelector('.messages-section').classList.add('show');
			  });
			  
			  document.querySelector('.messages-close').addEventListener('click', function() {
			    document.querySelector('.messages-section').classList.remove('show');
			  });
			}); */
			
			
		//Î™®Îã¨Ï∞Ω ÏÉùÏÑ±
	     /*  document.querySelectorAll(".openDetail").forEach((openDetail) => {
	         console.log(openDetail);
	         
	         
	      }) */
	      
	     /*  openDetail.addEventListener("click", displayModal); */
	      const modal = document.querySelector(".modal");
	      const closeButton = modal.querySelector(".closeBtn");
	      const modalBackground = modal.querySelector(".modal__background");

	      function displayModal(data) {
	    	  console.log(data)
	    	  let proofId = data.proofId;
	    	  $('#theId').val(data.proofId);
	    	  console.log(proofId,'=======');
	    	 
	    	  $(".replies").val();
		       //ajax Ìò∏Ï∂ú 
		       		$.ajax({
		      			url: '/mypage/proofDetail',
					      method: 'POST',
					      //contentType: 'application/plain',
					      data: {proofId : proofId},
					      success: function (result) {
					    	  console.log(result);
					    	  console.log(result.repllies);
					    	  console.log(result.brd.content);
					    	  console.log(result.brd.proofWriter);
					    	$('.replies').html("");
					    	  let list = result.repllies;
					    	  console.log(list.writerId);
					    	  let brd = result.brd;
					    	  var str = '<TR>';
					    	  let tbl =  $.each(list , function(i){
					    		  str += '<TD>' + list[i].writerId + '</TD><TD>' + list[i].content+'</TD><TD>'+list[i].replyDate+ '</TD>';
					                  str += '</TR>';
					             });
					    	  $(".replies").append(str);

					    	 $("#cnt").text(result.likeCnt);
					    	  document.querySelector("#contents").innerText=result.brd.content;
					    	  document.querySelector("#writer").innerText=result.brd.proofWriter;
					    	  
					      },
					      error: function (error) {
					         console.log(error);
					      }
		      		})
		      		
	         modal.classList.toggle("hidden");
	       
	      }

	      
	      closeButton.addEventListener("click", displayModal)
	      modalBackground.addEventListener("click", displayModal);
	      //=----Î™®Îã¨Ï∞ΩÍ¥ÄÎ†® Ïä§ÌÅ¨Î¶ΩÌä∏ ÎÅù
	      
	      function inputReply(){
	    	let content = $('#content').val();
	    	let id = document.querySelector('#theId').value;
	    	//ÏïÑÏüâÏä§ ÏïÑÏûêÏûê
	    	$.ajax({
	    		url : '/mypage/inputReply',
	    		method : 'POST',
	    		contentType: 'application/json',
			    data: JSON.stringify({content:content, groupId : id}),
			    success:function(result){
			    	console.log(result);
			    	$('.replies').html("");
			    	  let list = result;
			    	  console.log(list.writerId);
			    	  let brd = result.brd;
			    	  var str = '<TR>';
			    	  let tbl =  $.each(list , function(i){
			                  str += '<TD>' + list[i].writerId + '</TD><TD>' + list[i].content+'</TD><TD>'+list[i].replyDate+ '</TD>';
			                  str += '</TR>';
			             });
			    	  $(".replies").append(str);
			    },
			    error : function(error){
			    	console.log(error);
			    }
	    		
	    	})
		      	
					

	      }
	      
		</script>
	</div>
	<!-- index.html Í≥†Ïú† Ïä§ÌÅ¨Î¶ΩÌä∏ Ï∂îÍ∞Ä -->
	<th:block layout:fragment="script">
		<!--    <script th:src="@{/js/page/home.js}"></script>-->
	</th:block>
		
    	
			<script th:src="@{/shoptemplate/js/main.js}"></script>
	
</div>
</html>