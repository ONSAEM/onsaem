<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<!-- Css  -->
<th:block layout:fragment="css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/bootstrap.min.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/nice-select.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/jquery-ui.min.css}"
		type="text/css">
	<link rel="stylesheet"
		th:href="@{/shoptemplate/css/owl.carousel.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/slicknav.min.css}"
		type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/style.css}"
		type="text/css">
</th:block>

<head>
<style>
/* GENERAL STYLES */
.pagination ul {
	margin: auto;
	padding: 0;
	list-style: none;
}

/* ONE */
.p1 li {
	font-size: 14px;
	width: 40px;
	height: 40px;
	line-height: 40px;
	padding: 0;
	text-align: center;
	float: left;
	cursor: pointer;
}

.main {
	flex-grow: 1;
	display: flex;
	flex-direction: column;
	min-width: 1400px;
}

.main-container {
	padding: 20px;
	flex-grow: 1;
	overflow: auto;
	background-color: #FCFBFC;
}

.profile-cover {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	object-fit: cover;
	object-position: center;
	border-radius: 4px;
}

.subheader {
	position: relative;
	height: 300px;
	min-height: 250px;
	z-index: 1;
	display: flex;
	justify-content: center;
	align-items: center;
	background-size: cover;
	background-position: center;
}

.subheader:before {
	content: "";
	width: 100%;
	height: 100%;
	position: absolute;
	z-index: -1;
	left: 0;
	top: 0;
	background-image: url("/course/chal.gif");
	background-repeat: no-repeat;
	background-size: cover;
	background-position: center;
	filter: blur(30px);
	opacity: 0.7;
}

.glass {
	height: 100%;
	width: 100%;
	background-image: url("/course/chal.gif");
	background-size: cover;
	background-position: center;
	clip-path: inset(10em);
	filter: blur(5px);
	display: flex;
	justify-content: center;
	align-items: center;
}

.drop-shadow {
	height: 155%;
	width: 100%;
	filter: drop-shadow(0px 20px 10px rgba(0, 0, 0, 0.3));
	display: flex;
	justify-content: center;
	align-items: center;
}

.drop-shadow:before {
	display: block;
	content: "";
	position: absolute;
	top: 10em;
	height: calc(100% - 20em);
	width: calc(100% - 20em);
	border-top: 2px solid rgba(225, 225, 225, 0.2);
	border-left: 1px solid rgba(225, 225, 225, 0.1);
	border-right: 1px solid rgba(225, 225, 225, 0.3);
	z-index: 2;
}

.drop-shadow>span {
	position: absolute;
	z-index: 5;
	color: white;
	font-size: 4em;
	letter-spacing: 0.75em;
	padding-left: 0.375em;
}

.col-lg-3 {
	padding-left: 0px;
}

.sidebar {
	padding: 20px 30px;
	margin-bottom: 10px;
	background-color: #ffffff;
	border-radius: 20px;
}

.col-lg-9 {
	background-color: #ffffff;
	padding: 20px 30px;
	border-radius: 20px;
	margin-bottom: 10px;
	margin: 0, auto;
	width: 100%;
	max-width: 100%;
}

.product {
	padding-top: 0px;
	padding-bottom: 80px;
	position: relative;
	z-index: 1;
}

.gridView .products-row {
	margin: 8px;
	width: calc(100% - 16px);
	background-color: #f9f9f9;
	border-radius: 4px;
	cursor: pointer;
	transition: transform 0.2s;
	position: relative;
	padding-bottom: 8px;
}

.products-row img {
	border-radius: 4px 4px 0px 0px;
	height: 70%;
	width: 100%;
}

.product-cell {
	margin: 8px;
	text-align: end;
}

.classList .products-row {
	margin: 15px 26px;
	width: calc(30% - 16px);
	background-color: #f9f9f9;
	border-radius: 4px;
	cursor: pointer;
	transition: transform 0.2s;
	position: relative;
	padding-bottom: 8px;
	margin-bottom: 20px;
	height: 400px;
	border-radius: 4px;
}

.classList {
	flex-shrink: 0;
	width: 100%;
	max-width: 100%;
	padding-right: calc(var(- -bs-gutter-x)* .5);
	padding-left: calc(var(- -bs-gutter-x)* .5);
	margin-top: var(- -bs-gutter-y);
	display: flex;
	flex-wrap: wrap;
}

.sidebar__item h4 {
	color: #1c1c1c;
	font-weight: 700;
	margin-bottom: 13px;
}

#minamount {
	text-align: right;
}

#maxamount {
	text-align: left;
}

.price-input .fa-solid {
	margin: 0px 10px;
}

.classList_container {
	background-color: #ffffff;
	border-radius: 20px;
}

.pagination {
	margin-bottom: 20px;
}

#menu {
	/* 색 줄높이를 미리 잡고 시작한다 */
	font-family: 'Noto Sans KR', sans-serif;
	color: #222;
	line-height: 1.5em;
}
/* 보통 바디태그에 주고나서 a태그에 색상을 주는게 기본이다!!! (상속이 안되니까 별도로) */
a {
	color: #222;
	text-decoration: none;
}

.dropdown {
	/* 보더를 통해서 틀을 봐주는게 좋다 ! */
	/* border: 1px solid #000; */
	/* width: 200px; */
	display: inline-block;
}

.dropdown-btn {
	width: 210px;
	height: 50px;
	/* 패딩으로 크기 늘려주기 */
	padding: 10px;
	font-size: 18px;
	background-color: #9dc2c0;
	color: #fff;
	border: none;
	cursor: pointer;
}

.dropdown-submenu {
	/* border: 1px solid #000; */
	width: 210px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.192);
	display: none;
}

.dropdown-submenu a {
	display: block;
	padding: 7px;
	text-align: center;
}

.dropdown-submenu a:hover {
	background-color: #eee;
}
/* hover 뒤에 다른 selector가 이어지면 앞이 명령의 대상, 뒤에가 style이 수행되고 적용되는 부분 */
/* dropdown-btn 과 dropdown-sumbenu는 둘이 같은 계층이다 그래서 동작 안하는거임 (상하관계가 되어야 동작함)
	한칸을 띄운다 = 상하관계가 전제가 되어있다는거임 !!!!!*/
.dropdown:hover .dropdown-submenu {
	display: block;
}

.hero__search__form {
	width: 80%;
}
</style>
</head>

<!-- Content -->

<div layout:fragment="content">
	<div class="main">
		<div class="main-container">
			<div class="subheader">
				<img src="/course/chal.gif" alt="" class="profile-cover">
				<div class="drop-shadow">
					<div class="glass"></div>
					<span>Challengers</span>
				</div>
			</div>
			<br>
			<!-- Hero Section Begin -->
			<section class="hero hero-normal"
				style="position: relative; z-index: 1;">
				<div class="container">

					<div class="col-lg-9" style="margin: 0, auto; text-align: center">
						<div class="hero__search">
							<div class="hero__search__form">
								<form action="#">
									<div class="hero__search__categories">
										All Categories <span class="arrow_carrot-down"></span>
									</div>
									<input type="text" placeholder="검색어를 검색하세요" id="searchText">
									<button type="button" class="site-btn" onclick="searchList()">SEARCH</button>
								</form>
							</div>
							<div class="hero__search__phone">
								<div class="dropdown" id="menu">
									<button class="dropdown-btn">새 챌린저스 만들기</button>
									<div class="dropdown-submenu">
										<a href="/inputNormalChal" sec:authorize="isAuthenticated()">개인전
											챌린저스 만들기🙋‍♂️</a> <a sec:authorize="isAnonymous()"
											onclick="noLogin()">개인전 챌린저스 만들기🙋‍♂️</a> <a
											href="/inputTeamChal" sec:authorize="isAuthenticated()">팀전
											챌린저스 만들기🤼‍♀️</a> <a sec:authorize="isAnonymous()"
											onclick="noLogin()">팀전 챌린저스 만들기🤼‍♀️</a>

									</div>
								</div>

							</div>
						</div>
					</div>

				</div>
			</section>
			<!-- Hero Section End -->

			<!-- Product Section Begin -->
			<section class="product spad">
				<div class="container">
					<div class="row">
						<div id="rank" style="display:inherit">
							<div class="col-lg-3 col-md-5">
								<div class="sidebar">
									<div class="sidebar__item">
										<h4>Department</h4>
										<ul>
											<li><a href="/chalDepart?data=모집중">모집 중 챌린지</a></li>
											<li><a href="/chalDepart?data=진행중">진행 중 챌린지</a></li>
											<li><a href="/chalDepart?data=완료">종료 챌린지</a></li>
										</ul>
									</div>
									<div class="sidebar__item">
										<h4>참가요일</h4>
										<input type="checkbox" value="월" name="days">월요일</input>
										<input type="checkbox" value="화" name="days">화요일</input>
										<input type="checkbox" value="수" name="days">수요일</input><br>
										<input type="checkbox" value="목" name="days">목요일</input>
										<input type="checkbox" value="금" name="days">금요일</input>
										<input type="checkbox" value="토" name="days">토요일</input><br>
										<input type="checkbox" value="일" name="days">일요일</input><br>
										<p>모집 중인 챌린지 한해 검색 결과가 나타납니다</p>
										<button type="button" class="site-btn" onclick="daySearch()"  style="width:200px">Search</button>
									</div>
									<div class="sidebar__item">
										<button type="submit" class="site-btn" onclick=location.href="/inputNgo"  sec:authorize="isAuthenticated()" style="width:200px">기부처 신청하기</button>
										<button type="button" class="site-btn" sec:authorize="isAnonymous()"  onclick="noLogin()" style="width:200px">기부처 신청하기</button>	
									</div>
								</div>


							
						</div>
						<div style="width:100%; height:300px">
						<div class="col-lg-9 col-md-7">
							<div class="product__discount">
								<div class="section-title product__discount__title">
									<h2 class="ko-h2">기부금 순위</h2>
								</div>
								<div class="row">
									<div class="product__discount__slider owl-carousel gridView">
										<div class="products-row">
											<img
												src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80"
												alt="product">
											<div class="product-cell">Ocean</div>
											<div class="product-cell">$560</div>
											<div class="product-cell">11</div>
										</div>
									</div>
								</div>

							</div>
						</div>
						</div>
					</div>
				</div>
				<div class="classList_container">
					<div class="filter__item">
						<div class="row">
							<div class="col-lg-4 col-md-5">
								<div class="filter__sort">
									<span>Sort By</span> <select id="changeOption"
										th:onchange="changeOption(this.value)">
										<option value="All">All</option>
										<option th:each="ngo:${ngoes}" th:value="${ngo.ngoName}"
											name="ngoName" th:text="${ngo.ngoName}"></option>
									</select>
								</div>
							</div>
						</div>
					</div>

					<div class="classList">
						<div class="products-row" th:each="chal : ${chals}">
							<img th:src="'/fileView/'+${chal.fileRoute}" alt="product">

							<div class="product-cell">
								<a th:href="@{/detailChal(chalId = ${chal.chalId})}"
									th:text=${chal.chalName}>Oing</a>
							</div>
							<div class="product-cell"
								th:text="${chal.subClass}+'전'">
							</div>
							<div class="product-cell"
								th:text="${#dates.format(chal.startDate, 'MM월 dd일')}+'부터 시작!'">
							</div>
							<div class="product-cell"
								th:text="'인증 요일 : ' + ${chal.frequency}">
							</div>
						</div>
					</div>
					<!-- 페이징 -->
					<th:block
						th:replace="fragments/paging :: component(${paging}, 'gopage')">
				</div>
		</div>
		</section>
	</div>
	
</div>
<!-- Product Section End -->
<script type="text/javascript">
	//해당 요일에 인증날자인 챌린지스 검색 
	let checkedDays = [];
	function daySearch(){
		$('input[name=days]:checked').each(function(){
			var checked = $(this).val();
			checkedDays.push(checked);
		})
		
		var res = checkedDays.join('');
		console.log(res);
		location.href = "/chalListDays?frequency=" + res;
	}
	function searchList() {

		let searchText = $('#searchText').val();
		console.log(searchText);
		location.href = '/chalListSearch?chalName=' + searchText;
	}
	function changeOption(data) {
		console.log(data);
		if (data == 'All') {
			location.href = "/chalList";
		} else {
			location.href = "/chalListOption?ngoName=" + data;
		}
	}

	function gopage(i) {
		console.log(i);
		location.href = '/chalList?page=' + i;
	}

	function noLogin() {
		alert("로그인 후 이용가능합니다!")
	}
</script>


</div>



<!-- JS -->
<th:block layout:fragment="script">
	<script th:src="@{/shoptemplate/js/jquery-3.3.1.min.js}"></script>
	<script th:src="@{/shoptemplate/js/bootstrap.min.js}"></script>
	<script th:src="@{/shoptemplate/js/jquery.nice-select.min.js}"></script>
	<script th:src="@{/shoptemplate/js/jquery-ui.min.js}"></script>
	<script th:src="@{/shoptemplate/js/jquery.slicknav.js}"></script>
	<script th:src="@{/shoptemplate/js/mixitup.min.js}"></script>
	<script th:src="@{/shoptemplate/js/owl.carousel.min.js}"></script>
	<script th:src="@{/shoptemplate/js/main.js}"></script>
</th:block>
</div>

</html>