<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="light" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout2}">

<!-- Css  -->
<th:block layout:fragment="css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/bootstrap.min.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/shoptemplate/css/style.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/member.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/modal.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/css/management.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/challengers/css/mycss.css}">
	<!-- <link rel="stylesheet" th:href="@{/challengers/css/nomargin.css}" type="text/css"> -->
	<link rel="stylesheet" th:href="@{/challengers/css/mypage.css}" >
	
</th:block>

<head>
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<meta charset="UTF-8">
	<style>
	p{
		display:inline-block;
	}
	.boldFont{
		font-size : 20px;
	}
	/* GENERAL STYLES */
.pagination ul {
	margin: auto;
	padding: 0;
	list-style: none;
}

/* ONE */
.p1 li {
	font-size: 14px;
	width: 40px;
	height: 40px;
	line-height: 40px;
	padding: 0;
	text-align: center;
	float: left;
	cursor: pointer;
}

.main {
	flex-grow: 1;
	display: flex;
	flex-direction: column;
	min-width: 1400px;
}

.main-container {
	padding: 20px;
	flex-grow: 1;
	overflow-x: auto;
	background-color: #FCFBFC;
}

.profile-cover {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	object-fit: cover;
	object-position: center;
	border-radius: 4px;
}

.subheader {
	position: relative;
	height: 300px;
	min-height: 250px;
	z-index: 1;
	display: flex;
	justify-content: center;
	align-items: center;
	background-size: cover;
	background-position: center;
}

.subheader:before {
	content: "";
	width: 100%;
	height: 100%;
	position: absolute;
	z-index: -1;
	left: 0;
	top: 0;
	background-image: url("/course/chal.gif");
	background-repeat: no-repeat;
	background-size: cover;
	background-position: center;
	filter: blur(30px);
	opacity: 0.7;
}

.glass {
	height: 100%;
	width: 100%;
	background-image: url("/course/chal.gif");
	background-size: cover;
	background-position: center;
	clip-path: inset(10em);
	filter: blur(5px);
	display: flex;
	justify-content: center;
	align-items: center;
}

.drop-shadow {
	height: 155%;
	width: 100%;
	filter: drop-shadow(0px 20px 10px rgba(0, 0, 0, 0.3));
	display: flex;
	justify-content: center;
	align-items: center;
}

.drop-shadow:before {
	display: block;
	content: "";
	position: absolute;
	top: 10em;
	height: calc(100% - 20em);
	width: calc(100% - 20em);
	border-top: 2px solid rgba(225, 225, 225, 0.2);
	border-left: 1px solid rgba(225, 225, 225, 0.1);
	border-right: 1px solid rgba(225, 225, 225, 0.3);
	z-index: 2;
}

.drop-shadow>span {
	position: absolute;
	z-index: 5;
	color: white;
	font-size: 4em;
	letter-spacing: 0.75em;
	padding-left: 0.375em;
}

.col-lg-3 {
	padding-left: 0px;
}

.sidebar {
	padding: 20px 30px;
	margin-bottom: 10px;
	background-color: #ffffff;
	border-radius: 20px;
}

.col-lg-9 {
	background-color: #ffffff;
	padding: 20px 30px;
	border-radius: 20px;
	margin-bottom: 10px;
	margin: 0, auto;
	width: 100%;
	max-width: 100%;
}

.product {
	padding-top: 0px;
	padding-bottom: 80px;
	position: relative;
	z-index: 1;
}

.gridView .products-row {
	margin: 8px;
	width: calc(100% - 16px);
	background-color: #f9f9f9;
	border-radius: 4px;
	cursor: pointer;
	transition: transform 0.2s;
	position: relative;
	padding-bottom: 8px;
}

.products-row img {
	border-radius: 4px 4px 0px 0px;
	height: 70%;
	width: 100%;
}

.product-cell {
	margin: 8px;
	text-align: end;
}

.classList .products-row {
	margin: 15px 26px;
	width: calc(30% - 16px);
	background-color: #f9f9f9;
	border-radius: 4px;
	cursor: pointer;
	transition: transform 0.2s;
	position: relative;
	padding-bottom: 8px;
	margin-bottom: 20px;
	height: 400px;
	border-radius: 4px;
}

.classList {
	flex-shrink: 0;
	width: 100%;
	max-width: 100%;
	padding-right: calc(var(- -bs-gutter-x)* .5);
	padding-left: calc(var(- -bs-gutter-x)* .5);
	margin-top: var(- -bs-gutter-y);
	display: flex;
	flex-wrap: wrap;
}

.sidebar__item h4 {
	color: #1c1c1c;
	font-weight: 700;
	margin-bottom: 13px;
}

#minamount {
	text-align: right;
}

#maxamount {
	text-align: left;
}

.price-input .fa-solid {
	margin: 0px 10px;
}

.classList_container {
	background-color: #ffffff;
	border-radius: 20px;
}

.pagination {
	margin-bottom: 20px;
}
	
.gridView .products-row {
    margin: 8px;
    width: calc(25% - 16px);
    background-color: #f3f6fd;
    padding: 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: transform 0.2s;
    position: relative;
}


	button {
	all: unset;
	background-color: rgb(242, 210, 215);
	color: white;
	padding: 5px 25px;
	border-radius: 10px;
	cursor: pointer;
}

.btn {
	margin-top: 60px;
}

.modal {
	display: flex;
	justify-content: center;
	align-items: center;
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

	.modal__background {
		background-color: rgba(0, 0, 0, 0.6);
		width: 100%;
		height: 100%;
		position: absolute;
	}
	
	.modal__content {
		text-align: center;
		position: relative;
		background-color: white;
		border-radius: 10px;
		top: 0;
		padding: 10px 25px;
		width: 500px;
	}
	.modal__content2 {
		text-align: center;
		position: relative;
		background-color: white;
		border-radius: 10px;
		top: 0;
		padding: 10px 25px;
		width: 20%;
		height: 20%;
	}
	
	h1 {
		margin: 0;
		margin-bottom: 13px;
	}
	
	.hidden {
		display: none;
	}
	
	div{
		
		overflow-x: hidden"
	}
	#section{
		
	  background: url("/challengers/mypageBack.jpg"); 
	  	background-color : rgba(248,  242, 222, 0.2);
	  	background-size : 100% 100%;
		 
	}
	.profile{
		background-color : hsla(175, 5%, 93%, 0.8);
		border-radius : 5px;
		/* background: url("/challengers/postit.png"); */
	  	background-size : 100% 100%;
	  	padding : 20px;
	}
	.liLIst{
		float : left;
		margin : 20px 30px;
		width : 40%;
		height : 15%;
		padding : 5px;
		text-align : center;
		background-color :  hsla(175, 5%, 93%, 0.8);
	}
	.liLIst:hover{
		float : left;
		margin : 20px 30px;
		width : 40%;
		height : 15%;
		padding : 5px;
		text-align : center;
		background-color :  #EEC7C1;
	}
	.gallery-item{
		width: 100%;	
	}
	
	#subMenu>ul{
		background-color :  hsla(175, 5%, 93%, 0.8);
		width: 100%;
	}
	#detailReason{
	width: 100%;
	background-color : #F9F9F2;
		width : 70%;
		height: 18%;
		padding: 10px;
		box-sizing: border-box;
		border: none;
		border-radius: 5px;
		font-size: 16px;
		resize: both;
	}
	#content{
		width : 60%;
	}
	#replyContent{
		width : 70%;
		text-align : left;
	}
	.fontSizeUp{
		font-size : 20px;
		margin : 3px;
	}
	#makeBackGround{
		background-color : rgba(255, 255, 255, 0.6);
		padding : 1%;
	}
	</style>
</head>

<body style="overflow-x:hidden; overflow-y:auto;">
	<div layout:fragment="content" >
		<div class="projects-section" id="section">				
			<div class="project-boxes jsGridView">
			
				<div class="container" style="margin: 10px">
					<div class="profile">
						<div class="profile-image">
							<img th:src="'/fileView/'+${thumbnail.fileRoute}" alt="" style="aspect-ratio: 1 / 1; width:150px">
						</div>
						<div class="profile-user-settings">
							<h1 class="profile-user-name" th:text="${chal.chalName}" style="font-weight:bold">janedoe_</h1>
						</div>
						<div id="makeBackGround">
							<div class="profile-stats">
								<ul>
									<li style="font-size:large; font-weight : bold" class="fontSizeUp">ğŸ“†ì‹œì‘ì¼ <span class="profile-stat-count fontSizeUp" th:text="${#dates.format(chal.startDate, 'MMì›” ddì¼')}" id="startDate" >164</span></li>
									<li style="font-size:large; font-weight : bold">ğŸ“†ì¢…ë£Œì¼ <span class="profile-stat-count" th:text="${#dates.format(chal.endDate, 'MMì›” ddì¼')}" id="endDate" th:value="${chal.endDate}">188</span></li>
								</ul>
							</div>
							<div class="profile-bio">
								<p style="margin:1px" class="fontSizeUp">ì±Œë¦°ì§€ <span class="profile-real-name fontSizeUp" th:text="${chal.chalName}"></span>ì´/ê°€ ì¢…ë£Œì¼ê¹Œì§€ <span class="profile-real-name fontSizeUp" th:text="${dday}">Jane Doe</span>ì¼ ë‚¨ì•˜ì–´ìš”.</p>
								<br>
								<p class="fontSizeUp">ë‚¨ì€ ë„ì „ë„ í™”ì´íŒ…!!!</p>
							</div>
						</div>
			
					</div>
					
					<!-- End of profile section -->
					<nav id="subMenu">
						<ul>
							<li class="liLIst" th:onclick="move1()">ë‚˜ì˜ ë‹¬ì„±ë„</li>
							<li th:if="${chal.subClass} == 'íŒ€'" class="liLIst" th:onclick="move2()">ìš°ë¦¬íŒ€ ë‹¬ì„±ë„</li>
							<li th:if="${chal.subClass} == 'ê°œì¸'" class="liLIst" th:onclick="move2()">íƒ€ ìœ ì € ë‹¬ì„±ë„</li>
						</ul>
					</nav>
					
			
				</div>
				</div>
				<!-- End of container -->
			
					<!-- ë„ë„›ì°¨íŠ¸ -->
					<div id="chart" style=" text-align : center; width:500px; margin-left:200px;">
						<h3>ğŸ€ [[${user.participantId}]] ë‹˜ì˜ ë‹¬ì„±ë¥  ğŸ€</h3>	
						<canvas id="chDonut1" ></canvas>
					</div>	
					
				<div class="container">
	
				<div style="text-align : center; margin-top : 30px; margin-bottom : 30px">
					<span style="margin: 10px"><b class="boldFont">â–ª ì´ íšŸìˆ˜ :</b> <p>[[${chal.total}]] íšŒ</p></span>
					<span style="margin: 10px"><b class="boldFont">â–ª ì„±ê³µ íšŸìˆ˜ :</b> <p>[[${cntGood}]] íšŒ</p></span>
					<span style="margin: 10px"><b class="boldFont">â–ª ì‹¤íŒ¨ íšŸìˆ˜ :</b><p id="badCnt"></p></span>
					<span style="margin: 10px"><b class="boldFont">â–ª ë‚¨ì€ íšŸìˆ˜ : </b><p th:text="${chal.dday}+' íšŒ'"></p></span>
					<br>
					<span style="margin: 10px"><b class="boldFont">â–ª ì„±ê³µë¥  :</b><p id="successPercent"></p><p>%</p></span>
					<span style="margin: 10px"><b class="boldFont">â–ª ì—ìƒ ì„±ê³µë¥  :</b><p id="expectPC"></p><p>%</p></span>
					<span style="margin: 10px"><b class="boldFont">â–ª ì—ìƒ íšë“ í¬ì¸íŠ¸ :</b><p id="expectPT"></p><p>ì›</p></span></span>
				</div>	
					<div class="gallery">
			
						<div class="gallery-item openDetail" tabindex="0" th:each="myphoto : ${myPhotoes}" th:onclick="displayModal([[${myphoto}]])">
							<div class="row row-cols-3">
							<img th:src="'/fileView/'+${myphoto.fileRoute}" class="gallery-image col" style="aspect-ratio: 1 / 1; padding: 0px">
							<input type="hidden" id="chalId" th:value="${myphoto.proofId}">
							<div class="gallery-item-info">
			
								<ul>
									<li class="gallery-item-likes" ><span class="visually-hidden" ></span><i class="fas fa-heart" aria-hidden="true" th:text="' '+ ${#dates.format(myphoto.writeDate, 'yyyy-MM-dd')}" style="color:white"></i></li>
									<!-- <li class="gallery-item-comments"><span class="visually-hidden" >Comments:</span><i class="fas fa-comment" aria-hidden="true"></i> 2</li> -->
								</ul>
							</div>
							</div>
			
						</div>
			
						 <th:block th:if="${#lists.isEmpty(myPhotoes)}">
						 		<h5 style="text-align : center; padding: 300px 0">ì•„ì§ ë“±ë¡ëœ ì¸ì¦ ìƒ·ì´ ì—†ìŠµë‹ˆë‹¤!</h5>	
						 </th:block>
			
					</div>
					<!-- End of gallery -->
						</div>	    
		</div>
	
		<!-- ëª¨ë‹¬ì°½ -->
       <div class="modal hidden">
          <div class="modal__background"></div>
          <div class="modal__content" id="insta">
         	<div style="text-align : center">
             	<span id="writeDate" style="margin-right : 10px; font-size : 18px"></span>
             	<span id="writer" style="margin-right : 10px; font-size : 18px"></span>
             	<button id="on" onclick="openFrm()" style="float:right; margin-bottom : 10px">ì‹ ê³ </button>	
			</div>
             	
             	<input type="hidden" id="theId">
                <img style="width: 500px; aspect-ratio: 1 / 1" id="image">
                <div style="width:100%; text-align:left; padding:5px; background-color : rgba(225, 214, 176, 0.3); margin : 2px">
          			<p id="contents"></p>
          		</div>
          		<br>
          		<div style="text-align:left;">
          			<img src="/challengers/redheart.png" id="redHeart"  th:onclick="delLike()" type="button" style="width:4%;  display:inline-block;  margin-right : 5px">
                	<img src="/challengers/heart.png" th:onclick="addLike()" type="button" style="width:4%;display:inline-block;   margin-right : 5px" id="whiteHeart" >
                	<img src="/challengers/comment.png"  type="button" style="width:4%; display:inline-block;" id="bubble" th:onclick="openReplies()">
               </div>
               <div style="text-align:left; margin : 3px">
                	<span>ì¢‹ì•„ìš” :</span> <span id="cnt" ></span>           
               </div>
	                <table style="overflow-y:auto; width : 100%; " id="replyTable">
	                <thead><tr>
	                			<th>ëŒ“ì“´ì´</th>
	                			<th>ëŒ“ê¸€ë‚´ìš©</th>
	                			<th>ì‘ì„±ì¼ì</th>
	                		</tr></thead>
	                		<tbody class="replies">
	                		</tbody>
	                </table>    
                <input type="text" id="content" name="content">
                <button type="button" th:onclick="inputReply()">ëŒ“ê¸€ì“°ê¸°</button>
                <button type="button" class="closeBtn">ë‹«ê¸°</button>
          </div>
          <div id="reportFrm" style="display : none;" class="modal__content2">
          <!-- ì‹ ê³ í¼ -->
             <form >
             	<p style="font-size:large; margin : 1% 0">ì‹ ê³ í•˜ê¸°</p><Br>
             	<input type="hidden" id="theId">
                	<select id="reason" style="margin : 5px; width : 100px; height : 20%">
                		<option value="">==ì‹ ê³  ì‚¬ìœ  ê³ ë¥´ê¸°==</option>
                		<option value="ì•…ì„±ëŒ“ê¸€">ì•…ì„±ëŒ“ê¸€</option>
                		<option value="ì£¼ì œì™€ê´€ë ¨ì—†ëŠ”ì¸ì¦">ì£¼ì œì™€ ê´€ë ¨ ì—†ëŠ” ì¸ì¦</option>
                	</select>
                	<br>
                	<label>ì‹ ê³ ëŒ€ìƒ</label><input type="text" id="toId" placeholder="ì‹ ê³ ëŒ€ìƒì˜ ì•„ì´ë””"><br>
                	<textarea id="detailReason" placeholder="ìƒì„¸ ì‚¬ìœ ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                	<br>
                <button type="button" th:onclick="inputReport()">ì‹ ê³ </button>
                <button type="button" class="closeBtn" onclick="offFrm()">ë‹«ê¸°</button>
               </form>
          </div>
       </div>
       <!-- ëª¨ë‹¬ì°½ ë›-->
		
		
	<
		<script type="text/javascript">
		
			let token = $("meta[name='_csrf']").attr("content");
			let header = $("meta[name='_csrf_header']").attr("content");
			let memberId = "[[${#authentication.principal != 'anonymousUser' ? #authentication.principal.memberId:null}]]";
			
			//ì„±ê³µë¥  ê³„ì‚°ìœ„í•´
	      	let privateDonation = Number("[[${user.privateDonate}]]");
	      	let good = Number("[[${cntGood}]]"); 
	     	let total = Number("[[${chal.total}]]");
	     	let dday = Number("[[${chal.dday}]]");
	     	
	     	let bad = total-good-dday;
	     	$('#badCnt').text(bad+' íšŒ');
	     	let success = (good/total).toFixed()*100;
	     	$("#successPercent").text(success);
	     	//ì˜ˆìƒë‹¬ì„±ë¥ 
	     	let expectedSuccess = ((good+dday)/total).toFixed(1)*100;
	     	$("#expectPC").text(expectedSuccess);
	     	//ì˜ˆìƒ ë‹¬ì„±ë¥ ì€ totalë¶„ëª¨ë¡œ goodë”í•˜ê³ ,,badë¹¼ê³ ,, ë‚¨ì€ddayë„£ìœ¼ë©´ ë˜ë‚˜?
	     	//ì˜ˆìƒ í¬ì¸íŠ¸ ì˜ˆìƒ ë‹¬ì„±ë¥ ì˜ 1í¼
	     	//ì˜ˆìƒ í¬ì¸íŠ¸ ë‹¬ì„±ë¥ ,,- ifêµ¬ë¬¸ ì“°ê¸°..ì•„ë§ˆë„..?0
	     	let expectedPoint = 0;
	     	 if(expectedSuccess>=85){
	     		let expectedPoint = privateDonation*0.005;
	     		$("#expectPT").text(expectedPoint);
	     		
	     	}else if(expectedSuccess==1){
	     		let expectedPoint = privateDonation*0.01;
	     		$("#expectPT").text(expectedPoint);
	     	}else{
	     		let expectedPoint =0;
	     		$("#expectPT").text(expectedPoint);
	     	}

	     	//ì°¨íŠ¸
			var colors = ['#b4a7d6','#C4C4C4','#333333','#c3e6cb','#dc3545','#6c757d'];
			var donutOptions = {
				  cutoutPercentage: 85, 
				  legend: {position:'bottom', padding:5, labels: {pointStyle:'circle', usePointStyle:true}}
				};
		
			var data = new Array();
			data.push(success);
			data.push(100-success);
				// donut 1
				var chDonutData1 = {
				    labels: ['í‰ê· ë‹¬ì„±ë¥ '],
				    datasets: [
				      {
				        backgroundColor: colors.slice(0,2),
				        borderWidth: 0,
				        data: data,
				        cutout: "60%"
				      }
				    ]
				};
				
				var chDonut1 = document.getElementById("chDonut1");
				if (chDonut1) {
				  new Chart(chDonut1, {
				      type: 'doughnut',
				      data: chDonutData1,
				      options: donutOptions
				  });
				}
				
	     	//ëª¨ë‹¬ì°½
	     	const modal = document.querySelector(".modal");
	      const closeButton = modal.querySelector(".closeBtn");
	      const modalBackground = modal.querySelector(".modal__background");

	      function displayModal(data) {
	    	  let proofId = data.proofId;
	    	  $('#theId').val(data.proofId);
	    	  $(".replies").val();
		       //ajax í˜¸ì¶œ 
		       		$.ajax({
		      			url: '/mypage/proofDetail',
					      method: 'POST',
					      beforeSend : function(xhr)
			               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
			               xhr.setRequestHeader(header, token);
			               },
					      //contentType: 'application/plain',
					      data: {proofId : proofId},
					      success: function (result) {

					    	 $('#image').attr("src", '/fileView/'+result.brd.fileRoute);
					    	  
					    	$('.replies').html("");
					    	  let list = result.repllies;

					    	  let brd = result.brd;
					    	  var str = '<TR>';
					    	  let tbl =  $.each(list , function(i){
					    		  str += '<TD>' + list[i].writerId + '</TD><TD id="replyContent">' + list[i].content+'</TD><TD id="charDate">'+list[i].charDate+ '</TD>';
					                  str += '</TR>';
					             });
					    	  $(".replies").append(str);

					    	 $("#cnt").text(result.likeCnt);
					    	 //ì¸ì¦ê¸€ ë‚´ìš© ë„£ê¸°
					    	  document.querySelector("#contents").innerText=result.brd.content;
					    	 //ê¸€ì“´ì´ ë„£ê¸°
					    	  document.querySelector("#writer").innerText=result.brd.proofWriter;
					    	 
					    	//ì‘ì„±ì¼ì ë„£ê¸°
					    	function leftPad(value) {
							    if (value >= 10) {
							        return value;
							    }
							
							    return `0${value}`;
							}
					    	function toStringByFormatting(source, delimiter = '-') {
								    const year = source.getFullYear();
								    const month = leftPad(source.getMonth() + 1);
								    const day = leftPad(source.getDate());
								
								    return [year, month, day].join(delimiter);
								}
					    	
					    	  document.querySelector("#writeDate").innerHTML=toStringByFormatting(new Date(result.brd.writeDate),'-');
					    	 //ì¢‹ì•„ìš” ì—¬ë¶€ í™•ì¸
					    	 let check = result.checkLike;
					    	 if(check == 0){
					    		 $("#whiteHeart").show();
					    		 $("#redHeart").hide();
					    	 }else{
					    		 $("#redHeart").show();
					    		 $("#whiteHeart").hide();	 
					    	 }
					    	  
					      },
					      error: function (error) {
					         console.log(error);
					      }
		      		})
		      		
	         modal.classList.toggle("hidden");
	       
	      }

	      
	      closeButton.addEventListener("click", displayModal)
	      modalBackground.addEventListener("click", displayModal);
	      //=----ëª¨ë‹¬ì°½ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ ë
	      
	   
	      
	      //ëŒ“ê¸€ ë‹¬ê¸°
	      function inputReply(){
	    	let content = $('#content').val();
	    	let id = document.querySelector('#theId').value;
	    	//ì•„ìŸ‰ìŠ¤ ì•„ìì
	    	$.ajax({
	    		url : '/mypage/inputReply',
	    		method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		contentType: 'application/json',
			    data: JSON.stringify({content:content, groupId : id}),
			    success:function(result){
			    	$('.replies').html("");
			    	  let list = result;
			    	  let brd = result.brd;
			    	  var str = '<TR>';
			    	  let tbl =  $.each(list , function(i){
			                  str += '<TD>' + list[i].writerId + '</TD><TD>' + list[i].content+'</TD><TD>'+list[i].replyDate+ '</TD>';
			                  str += '</TR>';
			             });
			    	  $(".replies").append(str);
			    },
			    error : function(error){
			    	console.log(error);
			    }
	    		
	    	})
		      						
	      }
	      
	      //ì¢‹ì•„ìš” í•˜ê¸°
	      function addLike(){
	    	  let groupId = document.querySelector('#theId').value;

	    	  $.ajax({
	    		  url : '/mypage/addChalLike',
	    		  method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		  data : {groupId : groupId},
	    		  success:function(result){
	    			  //ì¢‹ì•„ìš” ê°¯ìˆ˜ ë³€ê²½
	    			  $("#cnt").text(result.likeCnt);
	    			  //í•˜íŠ¸ ë³€ê²½
	    			  let check = result.checkLike;
				    	 if(check == 0){
				    		 $("#whiteHeart").show();
				    		 $("#redHeart").hide();
				    	 }else{
				    		 $("#redHeart").show();
				    		 $("#whiteHeart").hide();	 
				    	 } 
	    		  },
	    		  error : function(){
	    			  console.log(error);
	    		  }
	    	  })
	      }
	      //ì¢‹ì•„ìš” ì‚­ì œ ã…ã…
	      function delLike(){
	    	  let groupId = document.querySelector('#theId').value;

	    	  $.ajax({
	    		  url : '/mypage/delChalLike',
	    		  method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		  data : {groupId : groupId},
	    		  success:function(result){
	    			  //ì¢‹ì•„ìš” ê°¯ìˆ˜ ë³€ê²½
	    			  $("#cnt").text(result.likeCnt);
	    			  //í•˜íŠ¸ ë³€ê²½
	    			  let check = result.checkLike;
				    	 if(check == 0){
				    		 $("#whiteHeart").show();
				    		 $("#redHeart").hide();
				    	 }else{
				    		 $("#redHeart").show();
				    		 $("#whiteHeart").hide();	 
				    	 } 
	    		  },
	    		  error : function(){
	    			  console.log(error);
	    		  }
	    	  })
	    	  
	      }
	      
	      //ì‹ ê³ í•˜ê¸° í¼ ì—´ê¸°
	      function openFrm(){
	    	  $("#insta").hide();
	    	  $("#on").hide();
	    	  $("#reportFrm").show();
	    	  
	      }
	      
	      //ì‹ ê³ í•˜ê¸° í¼ë‹«ê¸°
	      function offFrm(){
	    	  $("#insta").show();
	    	  $("#on").show();
	    	  $("#reportFrm").hide();
	      }
	      
	      //ì‹ ê³ í•˜ê¸°
	      function inputReport(){
	    	  let toId = $("#toId").val();
	    	  let groupId = document.querySelector('#theId').value;
	    	  let reason = $("#reason").val();
			  let detailReason = $("#detailReason").val();

	    	 	$.ajax({
	    		  url : '/mypage/inputReport',
	    		  method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		  contentType: 'application/json',
				  data: JSON.stringify({reason:reason, toId : toId, detailReason:detailReason}),
				  success:function(result){
					  alert(result.msg);
					  $("#detailReason").val(""); //ì´ˆê¸°í™”
					  $("#reason").val(""); //ì´ˆê¸°í™”
					  $("#toId").val("");
					  
				  }, 
	    		 error : function(error){
	    			 console.log(error);
	    		 }
	    		  
	    	  }) 
	      }
	      
	      //í˜ì´ì§€ ì´ë™ - ë‚¨ë“¤ ì¸ì¦ìƒ·, ê°™ì€ ì°¸ê°€ì ì¸ì¦ìƒ· ë³´ëŠ” ê³³ìœ¼ë£¨ ã… ë«ì¸ ê³  !
	      function move2(){
	    	  let chalId = '[[${chal.chalId}]]';
	    	  location.href="/mypage/myChalStatus2?chalId="+chalId;
	      }function move1(){
	    	  let chalId = '[[${chal.chalId}]]';
	    	  location.href="/mypage/myChalStatus?chalId="+chalId;
	      }
	      
	     
		</script>
		

		<!-- JS -->
		<th:block layout:fragment="script">
		</th:block>
	</div>

</body>

</html>