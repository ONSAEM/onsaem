<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<!-- index.html ê³ ìœ  CSS ì¶”ê°€ -->
<th:block layout:fragment="css">
	<!--    <link rel="stylesheet" th:href="@{/css/page/home.css}" >-->
	<link rel="stylesheet" th:href="@{/challengers/css/mycss.css}">
	<link rel="stylesheet" th:href="@{/challengers/css/nomargin.css}" type="text/css">
	<link rel="stylesheet" th:href="@{/challengers/css/mypage.css}" >

</th:block>
<head>
 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 
<style>
	p{
		display:inline-block;
	}
	.boldFont{
		font-size : 20px;
	}
	.pcList{
		display:inline-block
	}
	.app-content{
	width: 70%;
    margin: auto;
	}
	button {
   all: unset;
   background-color: mediumslateblue;
   color: white;
   padding: 5px 25px;
   border-radius: 10px;
   cursor: pointer;
	}
	
	.btn {
	   margin-top: 60px;
	}
	
	.modal {
	   display: flex;
	   justify-content: center;
	   align-items: center;
	   position: fixed;
	   top: 0;
	   left: 0;
	   width: 100%;
	   height: 100%;
	}
	
	.modal__background {
	   background-color: rgba(0, 0, 0, 0.6);
	   width: 100%;
	   height: 100%;
	   position: absolute;
	}
	
	.modal__content {
	   text-align: center;
	   position: relative;
	   background-color: white;
	   border-radius: 10px;
	   top: 0;
	   padding: 10px 25px;
	   width: 20%;
	}
	
	h1 {
	   margin: 0;
	   margin-bottom: 13px;
	}
	
	.hidden {
	   display: none;
	}
	
</style>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<!-- Content -->
<div layout:fragment="content">

	<section class="breadcrumb-section set-bg" th:data-setbg="@{/shoptemplate/img/breadcrumb.jpg}">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>Challengers</h2>
                        <div class="breadcrumb__option">
                            <a href="./index.html">Home</a>
                            <a href="./index.html">Vegetables</a>
                            <span>Vegetableâ€™s Package</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

	<div class="app-container">


		<div class="app-content">

			<div class="app-sidebar">
				<a href="" class="app-sidebar-link active"> 
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
          <polyline points="9 22 9 12 15 12 15 22" /></svg>
				</a> <a href="" class="app-sidebar-link"> <svg
						class="link-icon feather feather-pie-chart"
						xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						fill="none" stroke="currentColor" stroke-linecap="round"
						stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
          <defs />
          <path
							d="M21.21 15.89A10 10 0 118 2.83M22 12A10 10 0 0012 2v10z" />
        </svg>
				</a> <a href="" class="app-sidebar-link"> <svg
						xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						viewBox="0 0 24 24" fill="none" stroke="currentColor"
						stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
						class="feather feather-calendar">
					          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
					          <line x1="16" y1="2" x2="16" y2="6" />
					          <line x1="8" y1="2" x2="8" y2="6" />
					          <line x1="3" y1="10" x2="21" y2="10" /></svg>
				</a> <a href="" class="app-sidebar-link"> <svg
						class="link-icon feather feather-pie-chart"
						xmlns="http://www.w3.org/2000/svg" width="24" height="24"
						fill="none" stroke="currentColor" stroke-linecap="round"
						stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
          <defs />
          <circle cx="12" cy="12" r="3" />
          <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" />
        </svg>
				</a>
			</div>
			<div class="projects-section">
				<div class="projects-section-header">
					<p>Projects</p>
					<p class="time">December, 12</p>
				</div>
				<div class="projects-section-line">
					<div class="projects-status">
						<div class="item-status">
							<span class="status-number">45</span> <span class="status-type">In
								Progress</span>
						</div>
						<div class="item-status">
							<span class="status-number">24</span> <span class="status-type">Upcoming</span>
						</div>
						<div class="item-status">
							<span class="status-number">62</span> <span class="status-type">Total
								Projects</span>
						</div>
					</div>
					<div class="view-actions">
						<button class="view-btn list-view" title="List View">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
								viewBox="0 0 24 24" fill="none" stroke="currentColor"
								stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
								class="feather feather-list">
						              <line x1="8" y1="6" x2="21" y2="6" />
						              <line x1="8" y1="12" x2="21" y2="12" />
						              <line x1="8" y1="18" x2="21" y2="18" />
						              <line x1="3" y1="6" x2="3.01" y2="6" />
						              <line x1="3" y1="12" x2="3.01" y2="12" />
						              <line x1="3" y1="18" x2="3.01" y2="18" />
						     </svg>
						</button>
						<button class="view-btn grid-view active" title="Grid View" onclick="move()">
							<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
								viewBox="0 0 24 24" fill="none" stroke="currentColor"
								stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
								class="feather feather-grid">
						              <rect x="3" y="3" width="7" height="7" />
						              <rect x="14" y="3" width="7" height="7" />
						              <rect x="14" y="14" width="7" height="7" />
						              <rect x="3" y="14" width="7" height="7" /></svg>
						</button>
					</div>
				</div>
<div class="project-boxes jsGridView">
	<div class="container">

		<div class="profile">

			<div class="profile-image">

				<img src="https://images.unsplash.com/photo-1513721032312-6a18a42c8763?w=152&h=152&fit=crop&crop=faces" alt="">

			</div>

			<div class="profile-user-settings">

				<h1 class="profile-user-name" th:text="${chal.chalName}">janedoe_</h1>
			</div>

			<div class="profile-stats">
				<ul>
					<li>ì‹œì‘ì¼ <span class="profile-stat-count" th:text="${#dates.format(chal.startDate, 'MMì›” ddì¼')}" id="startDate" >164</span></li>
					<li>ì¢…ë£Œì¼ <span class="profile-stat-count" th:text="${#dates.format(chal.endDate, 'MMì›” ddì¼')}" id="endDate" th:value="${chal.endDate}">188</span> followers</li>
					<li><span class="profile-stat-count">206</span> following</li>
				</ul>

			</div>

			<div class="profile-bio">

				<p>ì±Œë¦°ì§€ <span class="profile-real-name" th:text="${chal.chalName}">Jane Doe</span>ê°€ ì¢…ë£Œì¼ê¹Œì§€ <span class="profile-real-name" th:text="${dday}">Jane Doe</span>ì¼ ë‚¨ì•˜ì–´ìš”. ë‚¨ì€ ë‚ ë“¤ë„ í™”ì´íŒ…!</p>

			</div>

		</div>
		
		<!-- End of profile section -->

	</div>
	</div>
	<!-- End of container -->

		<!-- ë„ë„›ì°¨íŠ¸ -->
		<div id="chart" style=" text-align : center; width:500px; margin-left:300px;">
			<h3>[[${user.participantId}]] ë‹˜ì˜ ë‹¬ì„±ë¥ </h3>	
			<canvas id="chDonut1" ></canvas>
		</div>	
		
	<div class="container">
	<div style="text-align : center; margin-top : 30px; margin-bottom : 30px">
		<span style="margin: 10px"><b class="boldFont">âœ¨ì„±ê³µ íšŸìˆ˜ :</b> <p>[[${cntGood}]] íšŒ</p></span>
		<span style="margin: 10px"><b class="boldFont">âœ¨ì‹¤íŒ¨ íšŸìˆ˜ :</b><p> [[${cntBad}]] íšŒ</p></span>
		<span style="margin: 10px"><b class="boldFont">âœ¨ë‚¨ì€ íšŸìˆ˜ : </b><p th:text="${dday}+' íšŒ'"></p></span>
		<br>
		<span style="margin: 10px"><b class="boldFont">âœ¨ì„±ê³µë¥  :</b><p id="successPercent"></p><p>%</p></span>
		<span style="margin: 10px"><b class="boldFont">âœ¨ì—ìƒ ì„±ê³µë¥  :</b><p id="expectPC"></p><p>%</p></span>
		<span style="margin: 10px"><b class="boldFont">âœ¨ì—ìƒ íšë“ í¬ì¸íŠ¸ :</b><p id="expectPT"></p><p>ì›</p></span></span>
	</div>	
		<div class="gallery">

			<div class="gallery-item" tabindex="0" th:each="myphoto : ${myPhotoes}" th:onclick="displayModal([[${myphoto}]])"  style="width:33%">
				<div class="row row-cols-3">
				<img th:src="'/fileView/'+${myphoto.fileRoute}" class="gallery-image col">
				<input type="hidden" id="chalId" th:value="${myphoto.proofId}">
				<div class="gallery-item-info">

					<ul>
						<li class="gallery-item-likes"><span class="visually-hidden">[[${myphoto.writeDate}]]</span><i class="fas fa-heart" aria-hidden="true"></i> 56</li>
						<li class="gallery-item-comments"><span class="visually-hidden">Comments:</span><i class="fas fa-comment" aria-hidden="true"></i> 2</li>
					</ul>
				</div>
				</div>

			</div>

			 <th:block th:if="${myPhotoes} ==null">
			 		<h5>ì•„ì§ ë“±ë¡ëœ ì¸ì¦ ìƒ·ì´ ì—†ìŠµë‹ˆë‹¤!</h5>	
			 </th:block>

		</div>
		<!-- End of gallery -->

		<div class="loader"></div>

	</div>	    


			</div>

		</div>
		<!-- ëª¨ë‹¬ì°½ -->
       <div class="modal hidden">
          <div class="modal__background"></div>
          <div class="modal__content" id="insta">
         
             	<span><p id="writer"></p></span>
             	<button id="on" onclick="openFrm()" style="display: on;">ì‹ ê³ </button>	
             	<input type="hidden" id="theId">
                <img style="width: 500px;" id="image">
          		<p id="contents"></p>      
                <table>
                <thead><tr>
                			<th>ëŒ“ì“´ì´</th>
                			<td>ëŒ“ê¸€ë‚´ìš©</td>
                		</tr></thead>
                		<tbody class="replies">
                		</tbody>
                </table>
                <span><p id="redHeart" th:onclick="delLike()">â¤</p><p id="whiteHeart" th:onclick="addLike()">ğŸ¤</p>ì¢‹ì•„ìš” <p id="cnt"></p></span>
                <input type="text" id="content" name="content">
                <button type="button" th:onclick="inputReply()">ëŒ“ê¸€ì“°ê¸°</button>
                <button type="button" class="closeBtn">ë‹«ê¸°</button>
             
          </div>
          <div id="reportFrm" style="display : none;" class="modal__content">
          <!-- ì‹ ê³ í¼ -->
             <form >
             	<input type="hidden" id="theId">
                	<select id="reason">
                		<option value="">==ì‹ ê³  ì‚¬ìœ  ê³ ë¥´ê¸°==</option>
                		<option value="ì•…ì„±ëŒ“ê¸€">ì•…ì„±ëŒ“ê¸€</option>
                		<option value="ì£¼ì œì™€ê´€ë ¨ì—†ëŠ”ì¸ì¦">ì£¼ì œì™€ ê´€ë ¨ ì—†ëŠ” ì¸ì¦</option>
                	</select>
                	<label>ì‹ ê³ ëŒ€ìƒ</label><input type="text" id="toId" placeholder="ì‹ ê³ ëŒ€ìƒì˜ ì•„ì´ë””">
                	<textarea id="detailReason" placeholder="ìƒì„¸ ì‚¬ìœ ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                <button type="button" th:onclick="inputReport()">ì‹ ê³ </button>
                <button type="button" class="closeBtn" onclick="offFrm()">ë‹«ê¸°</button>
               </form>
          </div>
       </div>
       <!-- ëª¨ë‹¬ì°½ ë›-->
		
		
	</div>
	<!-- index.html ê³ ìœ  ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ -->
	<th:block layout:fragment="script">
		<!--    <script th:src="@{/js/page/home.js}"></script>-->
		</th:block>
		<script type="text/javascript">
		//csrfì„¤ì •
		 var token = $("meta[name='_csrf']").attr("content");
		 var header = $("meta[name='_csrf_header']").attr("content");
		 
		document.addEventListener('DOMContentLoaded', function () {
	 		 var modeSwitch = document.querySelector('.mode-switch');

	  		modeSwitch.addEventListener('click', function () {
	  			document.documentElement.classList.toggle('dark');
	   		 	modeSwitch.classList.toggle('active');
			  });
			  
			  var listView = document.querySelector('.list-view');
			  var gridView = document.querySelector('.grid-view');
			  var projectsList = document.querySelector('.project-boxes');
			  
			  listView.addEventListener('click', function () {
			    gridView.classList.remove('active');
			    listView.classList.add('active');
			    projectsList.classList.remove('jsGridView');
			    projectsList.classList.add('jsListView');
			  });
			  
			  gridView.addEventListener('click', function () {
			    gridView.classList.add('active');
			    listView.classList.remove('active');
			    projectsList.classList.remove('jsListView');
			    projectsList.classList.add('jsGridView');
			  });
			  
			  document.querySelector('.messages-btn').addEventListener('click', function () {
			    document.querySelector('.messages-section').classList.add('show');
			  });
			  
			  document.querySelector('.messages-close').addEventListener('click', function() {
			    document.querySelector('.messages-section').classList.remove('show');
			  });
			});
		
		  	
			//ì„±ê³µë¥  ê³„ì‚°ìœ„í•´
	      	let privateDonation = Number("[[${user.privateDonate}]]");
	      	console.log(privateDonation);
	      	let good = Number("[[${cntGood}]]");
	     	let bad = Number("[[${cntBad}]]"); 
	     	let total = Number("[[${total}]]");
	     	let dday = Number("[[${dday}]]");
	     	let success = Math.abs((good/total)*100);
	     	$("#successPercent").text(success);
	     	//ì˜ˆìƒë‹¬ì„±ë¥ 
	     	let expectedSuccess = ((good-bad)+dday/total)*100;
	     	$("#expectPC").text(expectedSuccess);
	     	//ì˜ˆìƒ ë‹¬ì„±ë¥ ì€ totalë¶„ëª¨ë¡œ goodë”í•˜ê³ ,,badë¹¼ê³ ,, ë‚¨ì€ddayë„£ìœ¼ë©´ ë˜ë‚˜?
	     	//ì˜ˆìƒ í¬ì¸íŠ¸ ì˜ˆìƒ ë‹¬ì„±ë¥ ì˜ 1í¼
	     	//ì˜ˆìƒ í¬ì¸íŠ¸ ë‹¬ì„±ë¥ ,,- ifêµ¬ë¬¸ ì“°ê¸°..ì•„ë§ˆë„..?0
	     	let expectedPoint = 0;
	     	 if(expectedSuccess>=85){
	     		let expectedPoint = privateDonation*0.005;
	     		$("#expectPT").text(expectedPoint);
	     		
	     	}else if(expectedSuccess==1){
	     		let expectedPoint = privateDonation*0.01;
	     		$("#expectPT").text(expectedPoint);
	     	}else{
	     		let expectedPoint =0;
	     		$("#expectPT").text(expectedPoint);
	     	}
	     	
	     	console.log(success);
	      	
	     	//ì°¨íŠ¸
			var colors = ['#b4a7d6','#eae5e1','#333333','#c3e6cb','#dc3545','#6c757d'];
			var donutOptions = {
				  cutoutPercentage: 85, 
				  legend: {position:'bottom', padding:5, labels: {pointStyle:'circle', usePointStyle:true}}
				};
		
			var data = new Array();
			data.push(success);
			data.push(100-success);
				// donut 1
				var chDonutData1 = {
				    labels: ['í‰ê· ë‹¬ì„±ë¥ '],
				    datasets: [
				      {
				        backgroundColor: colors.slice(0,2),
				        borderWidth: 0,
				        data: data
				      }
				    ]
				};
				
				var chDonut1 = document.getElementById("chDonut1");
				if (chDonut1) {
				  new Chart(chDonut1, {
				      type: 'doughnut',
				      data: chDonutData1,
				      options: donutOptions
				  });
				}
				
	     	//ëª¨ë‹¬ì°½
	     	const modal = document.querySelector(".modal");
	      const closeButton = modal.querySelector(".closeBtn");
	      const modalBackground = modal.querySelector(".modal__background");

	      function displayModal(data) {
	    	  console.log(data)
	    	  let proofId = data.proofId;
	    	  $('#theId').val(data.proofId);
	    	  console.log(proofId,'=======');
	    	 
	    	  $(".replies").val();
		       //ajax í˜¸ì¶œ 
		       		$.ajax({
		      			url: '/mypage/proofDetail',
					      method: 'POST',
					      beforeSend : function(xhr)
			               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
			               xhr.setRequestHeader(header, token);
			               },
					      //contentType: 'application/plain',
					      data: {proofId : proofId},
					      success: function (result) {
					    	  console.log(result);
					    	  console.log(result.repllies);
					    	  console.log(result.brd.content);
					    	  console.log(result.brd.proofWriter);
					    	  $('#image').attr("src", '/fileView/'+result.brd.fileRoute);
					    	  
					    	$('.replies').html("");
					    	  let list = result.repllies;
					    	  console.log(list.writerId);
					    	  let brd = result.brd;
					    	  var str = '<TR>';
					    	  let tbl =  $.each(list , function(i){
					    		  str += '<TD>' + list[i].writerId + '</TD><TD>' + list[i].content+'</TD><TD>'+list[i].replyDate+ '</TD>';
					                  str += '</TR>';
					             });
					    	  $(".replies").append(str);

					    	 $("#cnt").text(result.likeCnt);
					    	 //ì¸ì¦ê¸€ ë‚´ìš© ë„£ê¸°
					    	  document.querySelector("#contents").innerText=result.brd.content;
					    	 //ê¸€ì“´ì´ ë„£ê¸°
					    	  document.querySelector("#writer").innerText=result.brd.proofWriter;
					    	 //ì¢‹ì•„ìš” ì—¬ë¶€ í™•ì¸
					    	 let check = result.checkLike;
					    	 if(check == 0){
					    		 $("#whiteHeart").show();
					    		 $("#redHeart").hide();
					    	 }else{
					    		 $("#redHeart").show();
					    		 $("#whiteHeart").hide();	 
					    	 }
					    	  
					      },
					      error: function (error) {
					         console.log(error);
					      }
		      		})
		      		
	         modal.classList.toggle("hidden");
	       
	      }

	      
	      closeButton.addEventListener("click", displayModal)
	      modalBackground.addEventListener("click", displayModal);
	      //=----ëª¨ë‹¬ì°½ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ ë
	      
	      //ëŒ“ê¸€ ë‹¬ê¸°
	      function inputReply(){
	    	let content = $('#content').val();
	    	let id = document.querySelector('#theId').value;
	    	//ì•„ìŸ‰ìŠ¤ ì•„ìì
	    	$.ajax({
	    		url : '/mypage/inputReply',
	    		method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		contentType: 'application/json',
			    data: JSON.stringify({content:content, groupId : id}),
			    success:function(result){
			    	console.log(result);
			    	$('.replies').html("");
			    	  let list = result;
			    	  console.log(list.writerId);
			    	  let brd = result.brd;
			    	  var str = '<TR>';
			    	  let tbl =  $.each(list , function(i){
			                  str += '<TD>' + list[i].writerId + '</TD><TD>' + list[i].content+'</TD><TD>'+list[i].replyDate+ '</TD>';
			                  str += '</TR>';
			             });
			    	  $(".replies").append(str);
			    },
			    error : function(error){
			    	console.log(error);
			    }
	    		
	    	})
		      						
	      }
	      
	      //ì¢‹ì•„ìš” í•˜ê¸°
	      function addLike(){
	    	  let groupId = document.querySelector('#theId').value;
	    	  console.log(groupId);
	    	  
	    	  $.ajax({
	    		  url : '/mypage/addChalLike',
	    		  method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		  data : {groupId : groupId},
	    		  success:function(result){
	    			  console.log(result);
	    			  //ì¢‹ì•„ìš” ê°¯ìˆ˜ ë³€ê²½
	    			  $("#cnt").text(result.likeCnt);
	    			  //í•˜íŠ¸ ë³€ê²½
	    			  let check = result.checkLike;
				    	 if(check == 0){
				    		 $("#whiteHeart").show();
				    		 $("#redHeart").hide();
				    	 }else{
				    		 $("#redHeart").show();
				    		 $("#whiteHeart").hide();	 
				    	 } 
	    		  },
	    		  error : function(){
	    			  console.log(error);
	    		  }
	    	  })
	      }
	      //ì¢‹ì•„ìš” ì‚­ì œ ã…ã…
	      function delLike(){
	    	  let groupId = document.querySelector('#theId').value;
	    	  console.log(groupId);
	    	  
	    	  $.ajax({
	    		  url : '/mypage/delChalLike',
	    		  method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		  data : {groupId : groupId},
	    		  success:function(result){
	    			  console.log(result);
	    			  //ì¢‹ì•„ìš” ê°¯ìˆ˜ ë³€ê²½
	    			  $("#cnt").text(result.likeCnt);
	    			  //í•˜íŠ¸ ë³€ê²½
	    			  let check = result.checkLike;
				    	 if(check == 0){
				    		 $("#whiteHeart").show();
				    		 $("#redHeart").hide();
				    	 }else{
				    		 $("#redHeart").show();
				    		 $("#whiteHeart").hide();	 
				    	 } 
	    		  },
	    		  error : function(){
	    			  console.log(error);
	    		  }
	    	  })
	    	  
	      }
	      
	      //ì‹ ê³ í•˜ê¸° í¼ ì—´ê¸°
	      function openFrm(){
	    	  $("#insta").hide();
	    	  $("#on").hide();
	    	  $("#reportFrm").show();
	    	  
	      }
	      
	      //ì‹ ê³ í•˜ê¸° í¼ë‹«ê¸°
	      function offFrm(){
	    	  $("#insta").show();
	    	  $("#on").show();
	    	  $("#reportFrm").hide();
	      }
	      
	      //ì‹ ê³ í•˜ê¸°
	      function inputReport(){
	    	  let toId = $("#toId").val();
	    	  let groupId = document.querySelector('#theId').value;
	    	  let reason = $("#reason").val();
			  let detailReason = $("#detailReason").val();
	    	  console.log(groupId);
	    	  
	    	 	$.ajax({
	    		  url : '/mypage/inputReport',
	    		  method : 'POST',
	    		  beforeSend : function(xhr)
	               {   /*ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ì „ì— í—¤ë”ì— csrfê°’ì„ ì„¤ì •í•œë‹¤*/
	               xhr.setRequestHeader(header, token);
	               },
	    		  contentType: 'application/json',
				  data: JSON.stringify({reason:reason, toId : toId, detailReason:detailReason}),
				  success:function(result){
					  alert(result.msg);
					  $("#detailReason").val(""); //ì´ˆê¸°í™”
					  $("#reason").val(""); //ì´ˆê¸°í™”
					  $("#toId").val("");
					  
				  }, 
	    		 error : function(error){
	    			 console.log(error);
	    		 }
	    		  
	    	  }) 
	      }
	      
	      //í˜ì´ì§€ ì´ë™ - ë‚¨ë“¤ ì¸ì¦ìƒ·, ê°™ì€ ì°¸ê°€ì ì¸ì¦ìƒ· ë³´ëŠ” ê³³ìœ¼ë£¨ ã… ë«ì¸ ê³  !
	      function move(){
	    	  let chalId = '[[${chal.chalId}]]';
	    	  location.href="/mypage/myChalStatus2?chalId="+chalId;
	      }
		</script>
    	
			<script th:src="@{/shoptemplate/js/main.js}"></script>
	
</div>
</html>